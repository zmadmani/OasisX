{"version":3,"sources":["images/x.svg","containers/market/orderlist/orderlist.js","containers/market/buysell/buysell.js","containers/market/myorders/myorders.js","containers/market/stats/chart/chart.js","containers/market/stats/stats.js","containers/market/markethistory/markethistory.js","containers/market/myhistory/myhistory.js","containers/market/sidebar/sidebar.js","containers/market/market.js","containers/home/home.js","containers/infobar/wrapstation/wrapstation.js","containers/infobar/infobar.js","containers/navbar/navbar.js","containers/App/App.js","registerServiceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","OrderList","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","orders","timeout","max_order","buildRow","bind","assertThisInitialized","updateOrders","nextProps","nextState","clearTimeout","getOrders","Math","max","apply","map","o","curr_1_amt","setTimeout","setState","drizzle","currencies","type","market","contracts","Market","length","token_addr_0","address","token_addr_1","pay_token","buy_token","SupportMethods","methods","getOffers","rawOrders","processOrders","n","i","id","pay_amount","web3","utils","fromWei","toString","buy_amount","price","order","round","curr_0_amt","push","x","parts","split","replace","join","item","index","_this2","ratio","color_0","color_1","style","backgroundImage","concat","backgroundSize","backgroundRepeat","react_default","a","createElement","Table","Row","key","onClick","setSidebar","className","Cell","numberWithCommas","textAlign","striped","basic","celled","unstackable","Header","HeaderCell","Body","Component","BuySell","loading","error","success","amount_0","ui_amount_0","amount_1","ui_amount_1","currency_0_balance","currency_1_balance","bignumbers","handleSubmit","updateBalances","flashSuccess","flashError","generateBigNumbers","drizzleState","account","accounts","balanceOf","toBN","_this$props2","curr_gem_0","curr_gem_1","data","pay_amt","pay_gem","buy_amt","buy_gem","offer","send","from","gasPrice","toWei","on","_this3","value","test","amount_1_bn","amount_0_bn","_this4","_this$state","can_buy","can_sell","curr_0_balance","curr_1_balance","gte","gt","side_text","Loader","active","inline","size","Form","Field","Input","label","content","labelPosition","placeholder","onChange","e","handlePriceChange","target","Group","widths","disabled","handleAmountChange","Button","inverted","handleAmountPercentageChange","div","mul","color","MyOrders","buy_orders","sell_orders","sort","b","parseInt","console","log","cancel","cacheSend","orders_table","background_item","cancelOrder","selectable","columns","styler","width","CrossHairs","_this$props","y","pointerEvents","stroke","x1","y1","x2","y2","height","React","Chart","handleTrackerChange","tracker","handleTimeRangeChange","timerange","handleMouseMove","chart_data","volume_data","selection","points","buildChartPoints","TimeSeries","name","volume_points","last_item","Index","getIndexString","Date","reverse","chart","start_time","range","begin","end_time","end","setHours","getHours","min_val","crop","min","max_val","padding","max_volume","entry","timeRange","minTime","maxTime","timeAxisAngledLabels","timeAxisHeight","paddingLeft","paddingRight","enablePanZoom","minDuration","onTrackerChanged","onBackgroundClick","onTimeRangeChanged","onMouseMove","showGrid","background","borderStyle","borderWidth","borderColor","paddingTop","timeAxisStyle","ticks","opacity","stroke-dasharray","values","fill","font-size","hideAxisLine","format","axis","series","interpolation","onSelectionChange","chart_CrossHairs","Stats","stats","num_users","num_buys","num_sells","buy_volume","sell_volume","last_price","subsciption","buildStat","getPastOrders","updateStats","subscribeToEvents","subscription","unsubscribe","are_stats_updated","old_stats","new_stats","users","eth","getBlockNumber","latestBlock","curr_1_addr","curr_2_addr","hashKey1","soliditySha3","hashKey2","Contract","abi","events","LogTake","filter","pair","fromBlock","event","eventsToOrders","buy_addr","pay_addr","returnValues","getType","getPrice","timestamp","toLocaleTimeString","toLocaleDateString","raw_timestamp","curr_1","curr_2","taker","maker","getPastEvents","toBlock","first","second","keys","statistics","stats_chart_chart","Grid","Column","mobile","tablet","computer","List","Item","Content","Description","MarketHistory","offers_table","MyHistory","subscriptions","taker_subscription","maker_subscription","true_type","taker_events","maker_events","SideBar","executeTrade","sidebar_info","amount","will_receive","info","balance_bn","offer_curr_1_bn","offer_curr_0_bn","buy","button_loading","visible","ui_amount","owner","button_success","button_error","updateInfo","stopLoading","getOffer","getOwner","toggleSidebar","internal_value","err","ui_value","_this$props3","action","subtitle","updated_info","getUpdatedInfo","Sidebar","as","Segment","animation","direction","Icon","giving","currency","balance","offered","max_take","receive_currency","lt","button_text","substring","handleUserChange","numBuys","numSells","buy_token_addr","sell_token_addr","numBuysKey","getOfferCount","cacheCall","numSellsKey","assign","title","panes","menuItem","render","Tab","Pane","myorders_myorders","myhistory_myhistory","markethistory_markethistory","sidebar_sidebar","stats_stats","menu","fluid","tabular","attached","buysell_buysell","divided","orderlist_orderlist","Home","Transition","transitionOnMount","duration","WrapStation","onWrap","deposit","WETH","amount_wrap","ui_amount_wrap","onUnwrap","withdraw","amount_unwrap","ui_amount_unwrap","weth_balance","eth_balance","onSubmit","handleUserUpdate","handlePercentUpdate","Infobar","context","approved","DAI","MKR","ETH","market_address","dai_balance","mkr_balance","allowance","weth_approval","dai_approval","mkr_approval","accountBalances","approve","approveCurrencyForAmount","current_approval","approveCurrency","unapproveCurrency","raw_balance","raw_allowance","padded","closeSidebar","vals","obj","getUIBalance","getUIAllowance","ui_account","x_icon","Checkbox","toggle","checked","toggleApproval","wrapstation_wrapstation","Navbar","handleItemClick","_ref","activeItem","toggleVisible","children","other_buttons","href","Responsive","onlyMobile","Menu","borderless","fixed","src","logo","alt","Dropdown","text","button","idx","Link","to","position","infobar_infobar","minWidth","onlyTablet","secondary","vertical","handleToggle","App","store","subscribe","getState","drizzleStatus","initialized","HashRouter","navbar_navbar","Switch","Route","exact","path","home_home","containers_market_market","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","Web3","givenProvider","config","require","erc20Abi","WEthAbi","MatchingMarketAbi","SupportMethodsAbi","options","contractName","web3Contract","interface","polls","blocks","syncAlways","drizzleStore","generateStore","Drizzle","ReactDOM","containers_App_App","document","getElementById","URL","process","origin","addEventListener","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.37d8cbbf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/x.23ec4264.svg\";","import React, { Component } from 'react'\nimport { Table } from 'semantic-ui-react'\n\nimport './orderlist.css'\n\nclass OrderList extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      orders: null,\n      timeout: null,\n      max_order: null\n    }\n\n    this.buildRow = this.buildRow.bind(this)\n    this.updateOrders = this.updateOrders.bind(this)\n  }\n\n  async componentDidMount() {\n    this.updateOrders()\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if(nextState.orders !== this.state.orders) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  componentWillUnmount() {\n    if(this.state.timeout !== null) {\n      clearTimeout(this.state.timeout)\n    }\n  }\n\n  async updateOrders() {\n    var orders = await this.getOrders()\n    var max_order = Math.max.apply(Math, orders.map(function(o) { return o.curr_1_amt; }))\n    var timeout = setTimeout(this.updateOrders, 5000)\n    this.setState({ orders, timeout, max_order })\n  }\n\n  async getOrders() {\n    var { drizzle, currencies, type } = this.props\n    var market = drizzle.contracts.Market\n\n    if(currencies.length === 2) {\n      var token_addr_0 = drizzle.contracts[currencies[0]].address\n      var token_addr_1 = drizzle.contracts[currencies[1]].address\n\n      var pay_token = null\n      var buy_token = null\n\n      if(type === \"BUY\") {\n        pay_token = token_addr_1\n        buy_token = token_addr_0\n      } else {\n        pay_token = token_addr_0\n        buy_token = token_addr_1\n      }\n\n      const rawOrders = await drizzle.contracts.SupportMethods.methods.getOffers(market.address, pay_token, buy_token).call()\n      var orders = []\n      if(rawOrders) {\n        orders = this.processOrders(rawOrders)\n      }\n      return orders\n    }\n  }\n\n  processOrders(rawOrders) {\n    var { type } = this.props\n\n    var n = rawOrders[\"ids\"].length\n    var orders = []\n    for(var i = 0; i < n; i++) {\n      if(rawOrders[\"ids\"][i] !== \"0\") {\n        var id = rawOrders[\"ids\"][i]\n        var pay_amount = this.props.drizzle.web3.utils.fromWei(rawOrders[\"payAmts\"][i].toString(), 'ether')\n        var buy_amount = this.props.drizzle.web3.utils.fromWei(rawOrders[\"buyAmts\"][i].toString(), 'ether') \n        var price = 0\n        var order = {}\n        if(type === \"BUY\") {\n          price = Math.round(pay_amount / buy_amount * 1000) / 1000\n          buy_amount = Math.round(buy_amount * 1000) / 1000\n          pay_amount = Math.round(pay_amount * 1000) / 1000\n          order = {\n            \"price\": price,\n            \"curr_0_amt\": buy_amount,\n            \"curr_1_amt\": pay_amount,\n            \"id\": id,\n            \"type\": type\n          }\n        } else {\n          price = Math.round(buy_amount / pay_amount * 1000) / 1000\n          buy_amount = Math.round(buy_amount * 1000) / 1000\n          pay_amount = Math.round(pay_amount * 1000) / 1000\n          order = {\n            \"price\": price,\n            \"curr_0_amt\": pay_amount,\n            \"curr_1_amt\": buy_amount,\n            \"id\": id,\n            \"type\": type\n          }\n        }\n        orders.push(order)\n      }\n    }\n\n    return orders\n  }\n\n  numberWithCommas(x) {\n      var parts = x.toString().split(\".\");\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      return parts.join(\".\");\n  }\n\n  buildRow(item, index) {\n    var { max_order } = this.state\n    var { type } = this.props\n\n    var ratio = item[\"curr_1_amt\"]/max_order * 100\n    var direction = \"right\"\n    var color_0 = \"rgba(255, 0, 0, 0.2)\"\n    var color_1 = \"rgba(0,0,0,0)\"\n    if(type === \"BUY\") {\n      color_0 = \"rgba(0, 255, 0, 0.1)\"\n      color_1 = \"rgba(0, 0, 0, 0)\"\n    }\n    var style = { backgroundImage: `linear-gradient(to ${direction}, ${color_0} , ${color_0}), linear-gradient(to ${direction}, ${color_1}, ${color_1})` ,\n      backgroundSize: `calc(${ratio}%) 100%`,\n      backgroundRepeat: `no-repeat`\n    }\n\n    return (\n      <Table.Row key={item[\"id\"]} onClick={() => this.props.setSidebar(item) } className=\"OrderList-table-row\" style={style}>\n        <Table.Cell>\n          <div className='OrderList-table-entry'>{this.numberWithCommas(item[\"price\"])}</div>\n        </Table.Cell>\n\n        <Table.Cell>\n          <div className='OrderList-table-entry'>{this.numberWithCommas(item[\"curr_0_amt\"])}</div>\n        </Table.Cell>\n\n        <Table.Cell  textAlign='left'>\n          <div className='OrderList-table-entry'>{this.numberWithCommas(item[\"curr_1_amt\"])}</div>\n        </Table.Cell>\n      </Table.Row>\n    )\n  }\n\n  render() {\n    var { orders } = this.state\n    var { currencies } = this.props\n\n    if(!orders) {\n      return (\n        <div className=\"OrderList\">\n          <div className=\"OrderList-loading\">Error...</div>\n        </div>\n      )\n    }\n\n    if(orders.length === 0) {\n      return (\n        <div className=\"OrderList\">\n          <div className=\"OrderList-loading\">Loading...</div>\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"OrderList\">\n        <Table striped basic celled unstackable id=\"OrderList-table\">\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell className='OrderList-table-header' textAlign='left'>Price</Table.HeaderCell>\n              <Table.HeaderCell className='OrderList-table-header' textAlign='left'>{currencies[0]}</Table.HeaderCell>\n              <Table.HeaderCell className='OrderList-table-header' textAlign='left'>{currencies[1]}</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Body id=\"OrderList-tableBody\">\n            {orders.map(this.buildRow)}\n          </Table.Body>\n        </Table>\n\n      </div>\n    );\n  }\n}\n\nexport default OrderList\n","import React, { Component } from 'react'\nimport { Input, Form, Button, Loader } from 'semantic-ui-react'\n\nimport './buysell.css'\n\nclass BuySell extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n      error: false,\n      success: false,\n      price: '',\n      amount_0: '',\n      ui_amount_0: '',\n      amount_1: '',\n      ui_amount_1: '',\n      currency_0_balance: \"0\",\n      currency_1_balance: \"0\",\n      bignumbers: []\n    }\n\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.updateBalances = this.updateBalances.bind(this)\n    this.flashSuccess = this.flashSuccess.bind(this)\n    this.flashError = this.flashError.bind(this)\n  }\n\n  componentDidMount() {\n    this.generateBigNumbers()\n    this.updateBalances()\n  }\n\n  async updateBalances() {\n    var { drizzle, drizzleState, currencies } = this.props\n    const account = drizzleState.accounts[0]\n    const currency_0_balance = await drizzle.contracts[currencies[0]].methods.balanceOf(account).call()\n    const currency_1_balance = await drizzle.contracts[currencies[1]].methods.balanceOf(account).call()\n    this.setState({ currency_0_balance, currency_1_balance })\n    setTimeout(this.updateBalances, 2500)\n  }\n\n  generateBigNumbers() {\n    var bignumbers = {}\n    for(var i = 0; i <= 10; i++) {\n      var key = i\n      bignumbers[key] = this.props.drizzle.web3.utils.toBN(key)\n    }\n\n    this.setState({ bignumbers })\n  }\n\n  // Main function that interfaces and writes to the blockchain.\n  // This is the most important function here.\n  handleSubmit(type) {\n    // Set loading to true to update UI\n    this.setState({loading: true, error: false, success: false})\n\n    var { currencies, drizzle, drizzleState } = this.props\n    const web3 = drizzle.web3\n\n    // Get the important info for the transaction\n    const account = drizzleState.accounts[0]\n    var amount_0 = this.state.amount_0\n    var amount_1 = this.state.amount_1\n    var curr_gem_0 = drizzle.contracts[currencies[0]].address\n    var curr_gem_1 = drizzle.contracts[currencies[1]].address\n    var data = {}\n\n    // Set data to the correct value depending on if the order is a BUY or SELL\n    // Basically you just flip the currency 0 and currency 1\n    if(type === \"BUY\") {\n      data = {\n        pay_amt: amount_1,\n        pay_gem: curr_gem_1,\n        buy_amt: amount_0,\n        buy_gem: curr_gem_0\n      }\n    } else if(type === \"SELL\") {\n      data = {\n        pay_amt: amount_0,\n        pay_gem: curr_gem_0,\n        buy_amt: amount_1,\n        buy_gem: curr_gem_1\n      }\n    } else {\n      return\n    }\n\n    this.props.drizzle.contracts.Market.methods.offer(data.pay_amt, data.pay_gem, data.buy_amt, data.buy_gem, 1).send({from: account, gasPrice: web3.utils.toWei('5', 'gwei') })\n      .on('receipt', this.flashSuccess)\n      .on('error', this.flashError)\n\n    this.setState({ loading: true })\n  }\n\n  flashSuccess() {\n    this.setState({ success : true, loading: false })\n    setTimeout(() => this.setState({ success: false, price: '', amount_0: '0', ui_amount_0: '', amount_1: '0', ui_amount_1: '' }), 1500)\n  }\n\n  flashError() {\n    this.setState({ error: true, loading: false })\n    setTimeout(() => this.setState({ error: false }), 1500)\n  }\n\n  handlePriceChange(value) {\n    const web3 = this.props.drizzle.web3\n    if(/\\S/.test(value) && this.state.ui_amount_0 !== \"\") {\n      var price = value\n      var ui_amount_1 = this.state.ui_amount_0 * price\n      var amount_1_bn = web3.utils.toWei(ui_amount_1.toString(), 'ether')\n      this.setState({ price: price, amount_1: amount_1_bn.toString(), ui_amount_1: ui_amount_1.toString() })\n    } else {\n      this.setState({ price: value, amount_1: '0', ui_amount_1: '' })    \n    }\n  }\n\n  handleAmountChange(index, value) {\n    const web3 = this.props.drizzle.web3\n    if(/\\S/.test(value) && this.state.price !== \"\") {\n      var price = this.state.price\n      var ui_amount_0 = null\n      var ui_amount_1 = null\n      var amount_0_bn = null\n      var amount_1_bn = null\n\n      if(index === 0) {\n        ui_amount_0 = value\n        amount_0_bn = web3.utils.toBN(web3.utils.toWei(ui_amount_0.toString(), 'ether'))\n        ui_amount_1 = ui_amount_0 * price\n        amount_1_bn = web3.utils.toBN(web3.utils.toWei(ui_amount_1.toString(), 'ether'))\n      } else if(index === 1) {\n        ui_amount_1 = value\n        amount_1_bn = web3.utils.toBN(web3.utils.toWei(ui_amount_1.toString(), 'ether'))\n        ui_amount_0 = ui_amount_1 / price\n        amount_0_bn = web3.utils.toBN(web3.utils.toWei(ui_amount_0.toString(), 'ether'))\n      } else {\n        return\n      }\n\n      this.setState({ \n        amount_0: amount_0_bn.toString(), \n        ui_amount_0: ui_amount_0, \n        amount_1: amount_1_bn.toString(),\n        ui_amount_1: ui_amount_1,\n      })\n    } else {\n      this.setState({\n        amount_0: '0',\n        ui_amount_0: '',\n        amount_1: '0',\n        ui_amount_1: ''\n      })\n    }\n  }\n\n  handleAmountPercentageChange(index, value) {\n    const web3 = this.props.drizzle.web3\n    var price = this.state.price\n\n    var ui_amount_0 = null\n    var ui_amount_1 = null\n    var amount_0_bn = null\n    var amount_1_bn = null\n\n    if(index === 0) {\n      amount_0_bn = value\n      ui_amount_0 = web3.utils.fromWei(amount_0_bn.toString(), 'ether')\n      ui_amount_1 = ui_amount_0 * price\n      amount_1_bn = web3.utils.toBN(web3.utils.toWei(ui_amount_1.toString(), 'ether'))\n    } else if(index === 1) {\n      amount_1_bn = value\n      ui_amount_1 = web3.utils.fromWei(amount_1_bn.toString(), 'ether')\n      ui_amount_0 = ui_amount_1 / price\n      amount_0_bn = web3.utils.toBN(web3.utils.toWei(ui_amount_0.toString(), 'ether'))\n    } else {\n      return\n    }\n\n    this.setState({\n      amount_0: amount_0_bn.toString(),\n      ui_amount_0: ui_amount_0,\n      amount_1: amount_1_bn.toString(),\n      ui_amount_1: ui_amount_1\n    })\n  }\n\n  render() {\n    var { price, amount_0, amount_1, ui_amount_0, ui_amount_1, currency_0_balance, currency_1_balance, bignumbers, loading, success, error } = this.state\n    var { currencies } = this.props\n    const web3 = this.props.drizzle.web3\n    \n    var can_buy = false\n    var can_sell = false\n    \n    var curr_0_balance = web3.utils.toBN(currency_0_balance)\n    var curr_1_balance = web3.utils.toBN(currency_1_balance)\n    \n    var amount_0_bn = web3.utils.toBN(amount_0)\n    var amount_1_bn = web3.utils.toBN(amount_1)\n\n    if(curr_0_balance.gte(amount_0_bn) && amount_0_bn.gt(web3.utils.toBN(\"0\"))) {\n      can_sell = true\n    }\n    \n    if(curr_1_balance.gte(amount_1_bn) && amount_1_bn.gt(web3.utils.toBN(\"0\"))) {\n      can_buy = true\n    }\n\n    var side_text = \"\"\n    if(loading) {\n      side_text = (<span className=\"BuySell-color\"><Loader active inline size=\"small\"/> LOADING...</span>)\n    }\n    if(error) {\n      side_text = (<span className=\"red BuySell-color\">FAILED</span>)\n    }\n    if(success) {\n      side_text = (<span className=\"green BuySell-color\">SUCCESS</span>)\n    }\n\n    return (\n      <div className=\"BuySell\">\n        <Form size='tiny'>\n          <div className=\"BuySell-headers\">Price</div>\n          <Form.Field>\n            <Input\n              label={{ basic: true, content: currencies[1] + \" / \" + currencies[0]  }}\n              labelPosition='right'\n              placeholder='Enter Price...'\n              value={price}\n              onChange={(e) => { this.handlePriceChange(e.target.value) }}\n            />\n          </Form.Field>\n          <div className=\"BuySell-headers\">Amounts</div>\n          <Form.Group widths='equal'>\n            <Form.Field>\n              <Input\n                label={{ basic: true, content: currencies[0] }}\n                labelPosition='right'\n                placeholder='Enter Amount...'\n                disabled={price === ''}\n                value={ui_amount_0}\n                onChange={(e) => { this.handleAmountChange(0, e.target.value) }}\n                className=\"BuySell-amount-input\"\n              />\n              <Button.Group className=\"BuySell-mini-buttons\" size='mini' basic inverted>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountChange(1, '') } >0%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(0, curr_0_balance.div(bignumbers[4]))} >25%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(0, curr_0_balance.div(bignumbers[2]))} >50%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(0, curr_0_balance.mul(bignumbers[3]).div(bignumbers[4]))} >75%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(0, curr_0_balance) } >100%</Button>\n              </Button.Group>\n            </Form.Field>\n            <Form.Field>\n              <Input\n                label={{ basic: true, content: currencies[1] }}\n                labelPosition='right'\n                placeholder='Enter Amount...'\n                disabled={price === ''}\n                value={ui_amount_1}\n                onChange={(e) => { this.handleAmountChange(1, e.target.value) }}\n                className=\"BuySell-amount-input\"\n              />\n              <Button.Group className=\"BuySell-mini-buttons\" size='mini' basic inverted>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountChange(1, '') } >0%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(1, curr_1_balance.div(bignumbers[4]))} >25%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(1, curr_1_balance.div(bignumbers[2]))} >50%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(1, curr_1_balance.mul(bignumbers[3]).div(bignumbers[4]))} >75%</Button>\n                <Button disabled={price === \"\"} onClick={() => this.handleAmountPercentageChange(1, curr_1_balance) } >100%</Button>\n              </Button.Group>\n            </Form.Field>\n          </Form.Group>\n          <Button className=\"BuySell-button\" color='green' disabled={!can_buy || loading} onClick={() => this.handleSubmit(\"BUY\")} >BUY {currencies[0]}</Button>\n          <Button className=\"BuySell-button\" color='red' disabled={!can_sell || loading} onClick={() => this.handleSubmit(\"SELL\")} >SELL {currencies[0]}</Button>\n          {side_text}\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default BuySell\n","import React, { Component } from 'react'\nimport { Table, Button } from 'semantic-ui-react'\n\nimport './myorders.css'\n\nclass MyOrders extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      orders: []\n    }\n\n    this.updateOrders = this.updateOrders.bind(this)\n  }\n\n  async componentDidMount() {\n    this.updateOrders()\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if(nextState.orders !== this.state.orders) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  async updateOrders() {\n    var buy_orders = await this.getOrders(\"BUY\")\n    var sell_orders = await this.getOrders(\"SELL\")\n    var orders = buy_orders.concat(sell_orders)\n    orders.sort(function(a, b) {\n      return parseInt(a[3]) > parseInt(b[3]) ? 1 : -1\n    })\n    this.setState({ orders })\n    setTimeout(this.updateOrders, 2500)\n  }\n\n  async getOrders(type) {\n    var { drizzle, currencies } = this.props\n    var market = drizzle.contracts.Market\n\n    if(currencies.length === 2) {\n      var token_addr_0 = drizzle.contracts[currencies[0]].address\n      var token_addr_1 = drizzle.contracts[currencies[1]].address\n\n      var pay_token = null\n      var buy_token = null\n\n      if(type === \"BUY\") {\n        pay_token = token_addr_1\n        buy_token = token_addr_0\n      } else {\n        pay_token = token_addr_0\n        buy_token = token_addr_1\n      }\n\n      const rawOrders = await drizzle.contracts.SupportMethods.methods.getOffers(market.address, pay_token, buy_token).call()\n      var orders = []\n      if(rawOrders) {\n        orders = this.processOrders(rawOrders, type)\n      }\n      return orders\n    }\n  }\n\n  processOrders(rawOrders, type) {\n    var { drizzleState } = this.props\n\n    let account = drizzleState.accounts[0]\n    var n = rawOrders[\"ids\"].length\n    var orders = []\n    for(var i = 0; i < n; i++) {\n      if(rawOrders[\"ids\"][i] !== \"0\" && rawOrders[\"owners\"][i] === account) {\n        var id = rawOrders[\"ids\"][i]\n        var pay_amount = this.props.drizzle.web3.utils.fromWei(rawOrders[\"payAmts\"][i].toString(), 'ether')\n        var buy_amount = this.props.drizzle.web3.utils.fromWei(rawOrders[\"buyAmts\"][i].toString(), 'ether') \n        var price = 0\n        var order = {}\n        if(type === \"BUY\") {\n          price = Math.round(pay_amount / buy_amount * 1000) / 1000\n          buy_amount = Math.round(buy_amount * 1000) / 1000\n          pay_amount = Math.round(pay_amount * 1000) / 1000\n          order = {\n            \"price\": price,\n            \"curr_0_amt\": buy_amount,\n            \"curr_1_amt\": pay_amount,\n            \"id\": id,\n            \"type\": type\n          }\n        } else {\n          price = Math.round(buy_amount / pay_amount * 1000) / 1000\n          buy_amount = Math.round(buy_amount * 1000) / 1000\n          pay_amount = Math.round(pay_amount * 1000) / 1000\n          order = {\n            \"price\": price,\n            \"curr_0_amt\": pay_amount,\n            \"curr_1_amt\": buy_amount,\n            \"id\": id,\n            \"type\": type\n          }\n        }\n        orders.push(order)\n      }\n    }\n\n    return orders\n  }\n\n  numberWithCommas(x) {\n      var parts = x.toString().split(\".\");\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      return parts.join(\".\");\n  }\n\n  cancelOrder(id) {\n    var { Market } = this.props.drizzle.contracts\n    let account = this.props.drizzleState.accounts[0]\n\n    console.log(\"CANCEL ORDER \" + id)\n    const cancel = Market.methods.cancel\n    cancel.cacheSend(id, {from: account, gasPrice: this.props.drizzle.web3.utils.toWei('5', 'gwei') })\n  }\n\n  render() {\n    var { orders } = this.state\n    var { currencies } = this.props\n\n    var orders_table = null\n    var background_item = null\n\n    if(orders.length === 0) {\n      background_item = (<div id=\"MyOrders-empty\">NO ORDERS</div>)\n    } else {\n      orders_table = (<Table.Body id=\"MyOrders-tableBody\">\n            {orders.map((item, index) => {\n              var type = item[\"type\"] === \"BUY\" ? (<span className=\"green MyOrders-color\">{item[\"type\"]}</span>) : (<span className=\"red\">{item[\"type\"]}</span>)\n              return (\n                <Table.Row key={index}>\n                  <Table.Cell  textAlign='left'>\n                    <div className='MyOrders-table-entry'><Button className=\"MyOrders-button\" color='red' size='mini' inverted onClick={() => {this.cancelOrder(item[\"id\"])}}>CANCEL</Button></div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MyOrders-table-entry'>{type}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MyOrders-table-entry'>{this.numberWithCommas(item[\"price\"])}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MyOrders-table-entry'>{this.numberWithCommas(item[\"curr_0_amt\"])}</div>\n                  </Table.Cell>\n\n                  <Table.Cell  textAlign='left'>\n                    <div className='MyOrders-table-entry'>{this.numberWithCommas(item[\"curr_1_amt\"])}</div>\n                  </Table.Cell>\n                </Table.Row>\n              )\n            })}\n          </Table.Body>)\n    }\n\n    return (\n      <div className=\"MyOrders\">\n        <Table selectable striped basic celled unstackable columns={5} textAlign='left' id=\"MyOrders-table\">\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell className='MyOrders-table-header' textAlign='left'>Action</Table.HeaderCell>\n              <Table.HeaderCell className='MyOrders-table-header' textAlign='left'>Type</Table.HeaderCell>\n              <Table.HeaderCell className='MyOrders-table-header' textAlign='left'>Price</Table.HeaderCell>\n              <Table.HeaderCell className='MyOrders-table-header' textAlign='left'>{currencies[0]}</Table.HeaderCell>\n              <Table.HeaderCell className='MyOrders-table-header' textAlign='left'>{currencies[1]}</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          { orders_table }\n        </Table>\n        { background_item }\n      </div>\n    );\n  }\n}\n\nexport default MyOrders\n","import React, { Component } from 'react'\nimport { Charts, ChartContainer, ChartRow, YAxis, LineChart, BarChart, styler, Resizable } from \"react-timeseries-charts\";\nimport { TimeSeries, Index } from \"pondjs\";\n\nimport './chart.css'\n\nconst style = styler([\n    { key: \"price\", color: \"white\", width: 1 },\n    { key: \"volume\", color: \"white\" }\n]);\n\nclass CrossHairs extends React.Component {\n    render() {\n        const { x, y } = this.props;\n        const style = { pointerEvents: \"none\", stroke: \"#ccc\" };\n        if (!(x === null) && !(y === null)) {\n            return (\n                <g>\n                    <line style={style} x1={0} y1={y} x2={this.props.width} y2={y} />\n                    <line style={style} x1={x} y1={0} x2={x} y2={this.props.height} />\n                </g>\n            );\n        } else {\n            return <g />;\n        }\n    }\n}\n\nclass Chart extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: true,\n      tracker: null,\n      chart_data: null,\n      volume_data: null,\n      timerange: null,\n      x: null,\n      y: null,\n      selection: null\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if(nextProps.orders.length > 0) {\n      var points = this.buildChartPoints(nextProps.orders)\n      var chart_data = new TimeSeries({\n        name: \"Chart\",\n        columns: [\"time\", \"price\"],\n        points: points\n      })\n      var timerange = chart_data.timerange()\n\n      var volume_points = []\n      for(var i = 0; i < nextProps.orders.length; i++) {\n        var item = nextProps.orders[i]\n        if(i > 0) {\n          var last_item = nextProps.orders[i-1]\n          if(item[\"raw_timestamp\"] === last_item[\"raw_timestamp\"]) {\n            volume_points[volume_points.length-1][1] += item[\"curr_2\"]\n          } else {\n            volume_points.push([Index.getIndexString(\"1s\", new Date(item[\"raw_timestamp\"])), item[\"curr_2\"]])\n          }\n        } else {\n          volume_points.push([Index.getIndexString(\"1s\", new Date(item[\"raw_timestamp\"])), item[\"curr_2\"]])\n        }\n      }\n\n      volume_points.reverse()\n      var volume_data = new TimeSeries({\n        name: \"Volume\",\n        columns: [\"index\", \"volume\"],\n        points: volume_points\n      })\n      this.setState({loading: false, chart_data, volume_data, timerange })\n    }\n  }\n\n  componentWillUnmount() {\n\n  }\n\n  componentWillMount() {\n  }\n\n  handleTrackerChange = (tracker) => {\n    if(!tracker) {\n      this.setState({ tracker, x: null, y: null })\n    } else {\n      this.setState({ tracker })\n    }\n  }\n\n  handleTimeRangeChange = (timerange) => {\n    this.setState({ timerange })\n  }\n\n  handleMouseMove = (x, y) => {\n    this.setState({ x, y })\n  }\n\n  buildChartPoints(orders) {\n    var chart_data = orders.map(function(order) {\n      return [order[\"raw_timestamp\"], order[\"price\"], order[\"curr_2\"]]\n    })\n    chart_data.reverse()\n    return chart_data\n  }\n\n  render() {\n    var { loading, chart_data, volume_data, timerange } = this.state\n    var { currencies } = this.props\n\n    var chart = <div id=\"Chart-loading\">Loading...</div>\n    if(chart_data && !loading) {\n      var start_time = chart_data.range().begin()\n      var end_time = chart_data.range().end()\n      end_time.setHours(end_time.getHours() + 6)\n      var min_val = chart_data.crop(timerange).min(\"price\")\n      var max_val = chart_data.crop(timerange).max(\"price\")\n      var padding = (max_val - min_val)*0.1\n      var max_volume = volume_data.crop(timerange).max(\"volume\")\n      chart = (\n        <Resizable>\n          <ChartContainer \n            timeRange={timerange} \n            minTime={start_time} \n            maxTime={end_time} \n            timeAxisAngledLabels={true}\n            timeAxisHeight={80}\n            paddingLeft={20}\n            paddingRight={20}\n            enablePanZoom={true}\n            minDuration={1000 * 60 * 60}\n            onTrackerChanged={this.handleTrackerChange}\n            onBackgroundClick={() => this.setState({ selection: null })}\n            onTimeRangeChanged={this.handleTimeRangeChange}\n            onMouseMove={(x, y) => this.handleMouseMove(x, y) }\n            showGrid\n            style={{\n                background: \"#0b1215\",\n                borderStyle: \"solid\",\n                borderWidth: 1,\n                borderColor: \"#0b1215\",\n                paddingTop: \"1em\"\n            }}\n            timeAxisStyle={{\n                              ticks: {\n                                  stroke: \"#AAA\",\n                                  opacity: 0.25,\n                                  \"stroke-dasharray\": \"1,1\"\n                                  // Note: this isn't in camel case because this is\n                                  // passed into d3's style\n                              },\n                              values: {\n                                  fill: \"#AAA\",\n                                  \"font-size\": 12\n                              }\n                          }}\n          >\n            <ChartRow height=\"325\">\n              <YAxis \n                id=\"price\" \n                label={\"Price (\" + currencies[1] + \" / \" + currencies[0] + \")\"} \n                min={min_val - padding} \n                max={max_val + padding}\n                hideAxisLine \n                showGrid \n                width=\"50\" \n                type=\"linear\" \n                format=\",.2f\"\n                style={{\n                    ticks: {\n                        stroke: \"#AAA\",\n                        opacity: 0.25,\n                        \"stroke-dasharray\": \"1,1\"\n                        // Note: this isn't in camel case because this is\n                        // passed into d3's style\n                    }}}\n              />\n              <Charts>\n                <LineChart \n                  axis=\"price\"\n                  series={chart_data} \n                  columns={[\"price\"]} \n                  style={style}\n                  interpolation=\"curveStepAfter\"\n                  selection={this.state.selection}\n                  onSelectionChange={selection =>\n                                      this.setState({ selection })\n                                    }\n                />\n                <CrossHairs x={this.state.x} y={this.state.y} />\n              </Charts>\n            </ChartRow>\n            <ChartRow height=\"75\">\n              <YAxis \n                id=\"amount\" \n                label={\"Volume (\" + currencies[1] + \")\"} \n                min={0}\n                max={max_volume} \n                hideAxisLine\n                showGrid\n                width=\"50\" \n                type=\"linear\" \n                format=\",.2r\"\n                style={{\n                    ticks: {\n                        stroke: \"#AAA\",\n                        opacity: 0.25,\n                        \"stroke-dasharray\": \"1,1\"\n                        // Note: this isn't in camel case because this is\n                        // passed into d3's style\n                    }}}\n              />\n              <Charts>\n                <BarChart\n                    axis=\"amount\"\n                    style={style}\n                    columns={[\"volume\"]}\n                    series={volume_data}\n                />\n              </Charts>\n            </ChartRow>\n          </ChartContainer>\n        </Resizable>\n      )\n    }\n\n    return (\n      <div className=\"Chart\">\n        {chart}\n      </div>\n    );\n  }\n}\n\nexport default Chart\n\n                // <BandChart\n                //   axis=\"price\"\n                //   series={chart_data}\n                //   column=\"price\"\n                //   aggregation={ {\n                //       size: \"30m\",\n                //       reducers: {\n                //           outer: [percentile(5), percentile(95)],\n                //           inner: [percentile(25), percentile(75)]\n                //       }\n                //   } }\n                //   style={style}\n                //   interpolation=\"curveBasis\"\n                // />","import React, { Component } from 'react'\nimport { Grid, List } from 'semantic-ui-react'\nimport Chart from './chart/chart'\n\nimport './stats.css'\n\nclass Stats extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: true,\n      orders: [],\n      stats: {\n        num_users: \"...\",\n        num_buys: \"...\",\n        num_sells: \"...\",\n        buy_volume: \"...\",\n        sell_volume: \"...\",\n        last_price: \"...\"\n      },\n      subsciption: null\n    }\n\n    this.buildStat = this.buildStat.bind(this)\n  }\n\n  async componentDidMount() {\n    this.setState({loading: true})\n    var orders = await this.getPastOrders()\n    this.setState({ orders }, this.updateStats)\n    var subscription = await this.subscribeToEvents()\n    this.setState({ subscription })\n  }\n\n  componentWillUnmount() {\n    if(this.state.subscription) {\n      this.state.subscription.unsubscribe()\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if(this.are_stats_updated(this.state.stats, nextState.stats)) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  are_stats_updated(old_stats, new_stats) {\n    if(old_stats[\"num_users\"] !== new_stats[\"num_users\"] ||\n      old_stats[\"num_buys\"] !== new_stats[\"num_buys\"] ||\n      old_stats[\"num_sells\"] !== new_stats[\"num_sells\"] ||\n      old_stats[\"buy_volume\"] !== new_stats[\"buy_volume\"] ||\n      old_stats[\"sell_volume\"] !== new_stats[\"sell_volume\"] ||\n      old_stats[\"last_price\"] !== new_stats[\"last_price\"] ) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  updateStats() {\n    var new_stats = {\n      num_users: 0,\n      num_buys: 0,\n      num_sells: 0,\n      buy_volume: 0,\n      sell_volume: 0,\n      last_price: 0\n    }\n\n    var users = {}\n    var orders = this.state.orders\n    for(var i = 0; i < orders.length; i++) {\n      var order = orders[i]\n\n      // Check if maker is in user list\n      if(!(order[\"maker\"] in users)) {\n        users[order[\"maker\"]] = 1\n        new_stats[\"num_users\"] += 1\n      }\n\n      // Check if taker is in user list\n      if(!(order[\"taker\"] in users)) {\n        users[order[\"taker\"]] = 1\n        new_stats[\"num_users\"] += 1\n      }\n\n      // Check if order is buy or sell and add the necessary info\n      if(order[\"type\"] === \"BUY\") {\n        new_stats[\"num_buys\"] += 1\n        new_stats[\"buy_volume\"] += order[\"curr_2\"]\n      } else if(order[\"type\"] === \"SELL\") {\n        new_stats[\"num_sells\"] += 1\n        new_stats[\"sell_volume\"] += order[\"curr_2\"]\n      }\n    }\n\n    new_stats[\"last_price\"] = Math.round(orders[0][\"price\"] * 100) / 100\n    new_stats[\"buy_volume\"] = Math.round(new_stats[\"buy_volume\"] * 100) / 100\n    new_stats[\"sell_volume\"] = Math.round(new_stats[\"sell_volume\"] * 100) / 100\n\n    this.setState({ stats: new_stats, loading: false })\n  }\n\n  async subscribeToEvents() {\n    var { currencies, drizzle } = this.props\n    var { Market } = drizzle.contracts\n    \n    var web3 = drizzle.web3\n    var latestBlock = await web3.eth.getBlockNumber()\n    \n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n    \n    const hashKey1 = web3.utils.soliditySha3(curr_1_addr, curr_2_addr)\n    const hashKey2 = web3.utils.soliditySha3(curr_2_addr, curr_1_addr)\n    \n    const market = new web3.eth.Contract(Market.abi, Market.address)\n    var subscription = market.events.LogTake({\n      filter: { pair: [hashKey1, hashKey2] },\n      fromBlock: latestBlock\n    }).on('data', function(event) {\n      var orders = this.eventsToOrders([event])\n      this.setState({ orders: orders.concat(this.state.orders) }, this.updateStats)\n    }.bind(this))\n\n    return subscription\n  }\n\n  componentWillMount() {\n  }\n\n  numberWithCommas(x) {\n      var parts = x.toString().split(\".\");\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      return parts.join(\".\");\n  }\n\n  getType(order) {\n    var { currencies, drizzle } = this.props\n\n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n\n    var buy_addr = order[\"buy_gem\"]\n    var pay_addr = order[\"pay_gem\"]\n\n    if(buy_addr === curr_1_addr && pay_addr === curr_2_addr) {\n      return \"SELL\"\n    } else if(buy_addr === curr_2_addr && pay_addr === curr_1_addr) {\n      return \"BUY\"\n    } else {\n      return null\n    }\n  }\n\n  getPrice(pay_amt, buy_amt, type) {\n    var price = 0\n    if(type === \"BUY\") {\n      price = Math.round(pay_amt / buy_amt * 1000) / 1000\n      buy_amt = Math.round(buy_amt * 1000) / 1000\n      pay_amt = Math.round(pay_amt * 1000) / 1000\n      return [price, buy_amt, pay_amt]\n    } else {\n      price = Math.round(buy_amt / pay_amt * 1000) / 1000\n      buy_amt = Math.round(buy_amt * 1000) / 1000\n      pay_amt = Math.round(pay_amt * 1000) / 1000\n      return [price, pay_amt, buy_amt]\n    }\n  }\n\n  eventsToOrders(events) {\n    var orders = []\n    for(var i = 0; i < events.length; i++) {\n      var order = events[i].returnValues\n      var type = this.getType(order)\n      var pay_amt = this.props.drizzle.web3.utils.fromWei(order[\"give_amt\"].toString(), 'ether')\n      var buy_amt = this.props.drizzle.web3.utils.fromWei(order[\"take_amt\"].toString(), 'ether')\n      var offer = this.getPrice(pay_amt, buy_amt, type)\n      var timestamp = new Date(order[\"timestamp\"] * 1000)\n      timestamp = timestamp.toLocaleTimeString() + \" \" + timestamp.toLocaleDateString()\n      order = {\n        \"raw_timestamp\": order[\"timestamp\"] * 1000,\n        \"timestamp\": timestamp,\n        \"type\": type,\n        \"price\": offer[0],\n        \"curr_1\": offer[1],\n        \"curr_2\": offer[2],\n        \"taker\": order[\"taker\"],\n        \"maker\": order[\"maker\"]\n      }\n      orders.push(order)\n    }\n    orders.reverse()\n    return orders\n  }\n\n  async getPastOrders() {\n    var { currencies, drizzle } = this.props\n    var { Market } = drizzle.contracts\n    var web3 = drizzle.web3\n    var latestBlock = await web3.eth.getBlockNumber()\n\n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n    const hashKey1 = web3.utils.soliditySha3(curr_1_addr, curr_2_addr)\n    const hashKey2 = web3.utils.soliditySha3(curr_2_addr, curr_1_addr)\n\n    const market = new web3.eth.Contract(Market.abi, Market.address)\n    var events = await market.getPastEvents(\"LogTake\", {\n      filter: { pair: [hashKey1, hashKey2] },\n      fromBlock: latestBlock - 5760,\n      toBlock: 'latest'\n    })\n\n    events.sort(function(first, second) {\n      return first.returnValues.timestamp - second.returnValues.timestamp\n    })\n\n    var orders = this.eventsToOrders(events)\n    return orders\n  }\n\n  buildStat(key) {\n    if(this.state.stats[key] === \"...\") {\n      return <span className=\"loading_value\">{this.state.stats[key]}</span>\n    }\n    var color = null\n    var value = this.numberWithCommas(this.state.stats[key])\n    if(key === \"buy_volume\" || key === \"sell_volume\") {\n      color = key === \"buy_volume\" ? \"important-green\" : \"important-red\"\n      value = <span className={color + \" value\"}>{value.toString()} <span className=\"sub_value\">{this.props.currencies[1]}</span></span>\n    }\n\n    if(key === \"num_buys\" || key === \"num_sells\") {\n      color = key === \"num_buys\" ? \"important-green\" : \"important-red\"\n      value = <span className={color + \" value\"}>{value.toString()}</span>\n    }\n    return value\n  }\n\n  render() {\n    var { orders } = this.state\n    var { currencies } = this.props\n\n    var keys = [\"num_users\", \"num_buys\", \"num_sells\", \"buy_volume\", \"sell_volume\", \"last_price\"]\n    var statistics = {}\n    for(var i = 0; i < keys.length; i++) {\n      var key = keys[i]\n      statistics[key] = this.buildStat(key)\n    }\n\n    var chart = <div id=\"Stats-chart\"><Chart orders={orders} currencies={currencies} /></div>\n\n    return (\n      <div className=\"Stats\">\n        {chart}\n        <div id=\"Stats-statistics\">\n          <Grid id=\"Stats-grid\">\n            <Grid.Row>\n              <Grid.Column mobile={8} tablet={4} computer={4} textAlign=\"center\">\n                <List.Item className=\"Stats-statistic\">\n                  <List.Content>\n                    <List.Header className=\"Stats-header\"># Buys</List.Header>\n                    <List.Description className=\"Stats-content\">{statistics[\"num_buys\"]}</List.Description>\n                  </List.Content>\n                </List.Item>\n              </Grid.Column>\n              <Grid.Column mobile={8} tablet={4} computer={4} textAlign=\"center\">\n                <List.Item className=\"Stats-statistic\">\n                  <List.Content>\n                    <List.Header className=\"Stats-header\">Buy Vol.</List.Header>\n                    <List.Description className=\"Stats-content\">{statistics[\"buy_volume\"]}</List.Description>\n                  </List.Content>\n                </List.Item>\n              </Grid.Column>\n              <Grid.Column mobile={8} tablet={4} computer={4} textAlign=\"center\">\n                <List.Item className=\"Stats-statistic\">\n                  <List.Content>\n                    <List.Header className=\"Stats-header\"># Sells</List.Header>\n                    <List.Description className=\"Stats-content\">{statistics[\"num_sells\"]}</List.Description>\n                  </List.Content>\n                </List.Item>\n              </Grid.Column>\n              <Grid.Column mobile={8} tablet={4} computer={4} textAlign=\"center\">\n                <List.Item className=\"Stats-statistic\">\n                  <List.Content>\n                    <List.Header className=\"Stats-header\">Sell Vol.</List.Header>\n                    <List.Description className=\"Stats-content\">{statistics[\"sell_volume\"]}</List.Description>\n                  </List.Content>\n                </List.Item>\n              </Grid.Column>\n              <Grid.Column mobile={8} tablet={8} computer={8} textAlign=\"center\">\n                <List.Item className=\"Stats-statistic\">\n                  <List.Content>\n                    <List.Header className=\"Stats-header\">Last Price</List.Header>\n                    <List.Description className=\"Stats-content\">{statistics[\"last_price\"]}</List.Description>\n                  </List.Content>\n                </List.Item>\n              </Grid.Column>\n              <Grid.Column mobile={8} tablet={8} computer={8} textAlign=\"center\">\n                <List.Item className=\"Stats-statistic\">\n                  <List.Content>\n                    <List.Header className=\"Stats-header\"># Users</List.Header>\n                    <List.Description className=\"Stats-content\">{statistics[\"num_users\"]}</List.Description>\n                  </List.Content>\n                </List.Item>\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Stats","import React, { Component } from 'react'\nimport { Table } from 'semantic-ui-react'\n\nimport './markethistory.css'\n\nclass MarketHistory extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n      orders: [],\n      max_order: null,\n      subsciption: null\n    }\n  }\n\n  async componentDidMount() {\n    this.setState({loading: true})\n    var orders = await this.getPastOrders()\n    var max_order = Math.max.apply(Math, orders.map(function(o) { return o.curr_2; }))\n    this.setState({ orders, max_order, loading: false })\n    var subscription = await this.subscribeToEvents()\n    this.setState({ subscription })\n  }\n\n  componentWillUnmount() {\n    if(this.state.subscription) {\n      this.state.subscription.unsubscribe()\n    }\n  }\n\n  async subscribeToEvents() {\n    var { currencies, drizzle } = this.props\n    var { Market } = drizzle.contracts\n    \n    var web3 = drizzle.web3\n    var latestBlock = await web3.eth.getBlockNumber()\n    \n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n    \n    const hashKey1 = web3.utils.soliditySha3(curr_1_addr, curr_2_addr)\n    const hashKey2 = web3.utils.soliditySha3(curr_2_addr, curr_1_addr)\n    \n    const market = new web3.eth.Contract(Market.abi, Market.address)\n    var subscription = market.events.LogTake({\n      filter: { pair: [hashKey1, hashKey2] },\n      fromBlock: latestBlock\n    }).on('data', function(event) {\n      var orders = this.eventsToOrders([event])\n      this.setState({ orders: orders.concat(this.state.orders) })\n    }.bind(this))\n\n    return subscription\n  }\n\n  componentWillMount() {\n  }\n\n  numberWithCommas(x) {\n      var parts = x.toString().split(\".\");\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      return parts.join(\".\");\n  }\n\n  getType(order) {\n    var { currencies, drizzle } = this.props\n\n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n\n    var buy_addr = order[\"buy_gem\"]\n    var pay_addr = order[\"pay_gem\"]\n\n    if(buy_addr === curr_1_addr && pay_addr === curr_2_addr) {\n      return \"SELL\"\n    } else if(buy_addr === curr_2_addr && pay_addr === curr_1_addr) {\n      return \"BUY\"\n    } else {\n      return null\n    }\n  }\n\n  getPrice(pay_amt, buy_amt, type) {\n    var price = 0\n    if(type === \"BUY\") {\n      price = Math.round(pay_amt / buy_amt * 1000) / 1000\n      buy_amt = Math.round(buy_amt * 1000) / 1000\n      pay_amt = Math.round(pay_amt * 1000) / 1000\n      return [price, buy_amt, pay_amt]\n    } else {\n      price = Math.round(buy_amt / pay_amt * 1000) / 1000\n      buy_amt = Math.round(buy_amt * 1000) / 1000\n      pay_amt = Math.round(pay_amt * 1000) / 1000\n      return [price, pay_amt, buy_amt]\n    }\n  }\n\n  eventsToOrders(events) {\n    var orders = []\n    for(var i = 0; i < events.length; i++) {\n      var order = events[i].returnValues\n      var type = this.getType(order)\n      var pay_amt = this.props.drizzle.web3.utils.fromWei(order[\"give_amt\"].toString(), 'ether')\n      var buy_amt = this.props.drizzle.web3.utils.fromWei(order[\"take_amt\"].toString(), 'ether')\n      var offer = this.getPrice(pay_amt, buy_amt, type)\n      var timestamp = new Date(order[\"timestamp\"] * 1000)\n      timestamp = timestamp.toLocaleTimeString() + \" \" + timestamp.toLocaleDateString()\n      order = {\n        \"timestamp\": timestamp,\n        \"type\": type,\n        \"price\": offer[0],\n        \"curr_1\": offer[1],\n        \"curr_2\": offer[2],\n        \"taker\": order[\"taker\"],\n        \"maker\": order[\"maker\"]\n      }\n      orders.push(order)\n    }\n    orders.reverse()\n    return orders\n  }\n\n  async getPastOrders() {\n    var { currencies, drizzle } = this.props\n    var { Market } = drizzle.contracts\n    var web3 = drizzle.web3\n    var latestBlock = await web3.eth.getBlockNumber()\n\n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n    const hashKey1 = web3.utils.soliditySha3(curr_1_addr, curr_2_addr)\n    const hashKey2 = web3.utils.soliditySha3(curr_2_addr, curr_1_addr)\n\n    const market = new web3.eth.Contract(Market.abi, Market.address)\n    var events = await market.getPastEvents(\"LogTake\", {\n      filter: { pair: [hashKey1, hashKey2] },\n      fromBlock: latestBlock - 2000,\n      toBlock: 'latest'\n    })\n\n    events.sort(function(first, second) {\n      return first.returnValues.timestamp - second.returnValues.timestamp\n    })\n\n    var orders = this.eventsToOrders(events)\n    return orders\n  }\n\n  render() {\n    var { loading, orders, max_order } = this.state\n    var { currencies } = this.props\n\n    var offers_table = null\n    var background_item = null\n\n    if(loading) {\n      background_item = (<div id=\"MarketHistory-empty\">Loading...</div>)\n    } else if(orders.length === 0) {\n      background_item = (<div id=\"MarketHistory-empty\">NO ORDERS</div>)\n    } else {\n      offers_table = (<Table.Body id=\"MarketHistory-tableBody\">\n            {orders.map((item, index) => {\n              var ratio = item[\"curr_2\"]/max_order * 100\n              var direction = \"right\"\n              var color_0 = \"rgba(255, 0, 0, 0.2)\"\n              var color_1 = \"rgba(0,0,0,0)\"\n              if(item[\"type\"] === \"BUY\") {\n                color_0 = \"rgba(0, 255, 0, 0.1)\"\n                color_1 = \"rgba(0, 0, 0, 0)\"\n              }\n              var style = { backgroundImage: `linear-gradient(to ${direction}, ${color_0} , ${color_0}), linear-gradient(to ${direction}, ${color_1}, ${color_1})` ,\n                backgroundSize: `calc(${ratio}%) 100%`,\n                backgroundRepeat: `no-repeat`\n              }\n              var type = item[\"type\"] === \"BUY\" ? (<span className=\"green MarketHistory-type\">BUY</span>) : (<span className=\"red MarketHistory-type\">SELL</span>)\n              return (\n                <Table.Row key={index} style={style}>\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{type}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{item[\"timestamp\"]}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{this.numberWithCommas(item[\"price\"])}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{this.numberWithCommas(item[\"curr_1\"])}</div>\n                  </Table.Cell>\n\n                  <Table.Cell  textAlign='left'>\n                    <div className='MarketHistory-table-entry'>{this.numberWithCommas(item[\"curr_2\"])}</div>\n                  </Table.Cell>\n                </Table.Row>\n              )\n            })}\n          </Table.Body>)\n    }\n\n    return (\n      <div className=\"MarketHistory\">\n        <Table striped basic celled unstackable id=\"MarketHistory-table\">\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>Type</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>Time</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>Price</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>{currencies[0]}</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>{currencies[1]}</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          { offers_table }\n        </Table>\n        { background_item }\n      </div>\n    );\n  }\n}\n\nexport default MarketHistory\n","import React, { Component } from 'react'\nimport { Table } from 'semantic-ui-react'\n\nimport './myhistory.css'\n\nclass MyHistory extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n      orders: [],\n      max_order: null,\n      subscriptions: null\n    }\n  }\n\n  async componentDidMount() {\n    this.setState({loading: true})\n    var orders = await this.getPastOrders()\n    var max_order = Math.max.apply(Math, orders.map(function(o) { return o.curr_2; }))\n    this.setState({ orders, max_order, loading: false })\n    var subscriptions = await this.subscribeToEvents()\n    this.setState({ subscriptions })\n  }\n\n  componentWillUnmount() {\n    if(this.state.subscriptions) {\n      this.state.subscriptions[0].unsubscribe()\n      this.state.subscriptions[1].unsubscribe()\n    }\n  }\n\n  async subscribeToEvents() {\n    var { currencies, drizzle, drizzleState } = this.props\n    var { Market } = drizzle.contracts\n    let account = drizzleState.accounts[0]\n\n    var web3 = drizzle.web3\n    var latestBlock = await web3.eth.getBlockNumber()\n    \n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n    \n    const hashKey1 = web3.utils.soliditySha3(curr_1_addr, curr_2_addr)\n    const hashKey2 = web3.utils.soliditySha3(curr_2_addr, curr_1_addr)\n    \n    const market = new web3.eth.Contract(Market.abi, Market.address)\n    var taker_subscription = market.events.LogTake({\n      filter: { pair: [hashKey1, hashKey2], taker: account },\n      fromBlock: latestBlock\n    }).on('data', function(event) {\n      var orders = this.eventsToOrders([event])\n      this.setState({ orders: orders.concat(this.state.orders) })\n    }.bind(this))\n\n    var maker_subscription = market.events.LogTake({\n      filter: { pair: [hashKey1, hashKey2], maker: account },\n      fromBlock: latestBlock\n    }).on('data', function(event) {\n      var orders = this.eventsToOrders([event])\n      this.setState({ orders: orders.concat(this.state.orders) })\n    }.bind(this))\n\n    return [taker_subscription, maker_subscription]\n  }\n\n  numberWithCommas(x) {\n      var parts = x.toString().split(\".\");\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      return parts.join(\".\");\n  }\n\n  getType(order) {\n    var { currencies, drizzle } = this.props\n\n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n\n    var buy_addr = order[\"buy_gem\"]\n    var pay_addr = order[\"pay_gem\"]\n\n    var type = null\n\n    if(buy_addr === curr_1_addr && pay_addr === curr_2_addr) {\n      type = \"SELL\"\n    } else if(buy_addr === curr_2_addr && pay_addr === curr_1_addr) {\n      type = \"BUY\"\n    } else {\n      return null\n    }\n\n    return type\n  }\n\n  getPrice(pay_amt, buy_amt, type) {\n    var price = 0\n    if(type === \"BUY\") {\n      price = Math.round(pay_amt / buy_amt * 1000) / 1000\n      buy_amt = Math.round(buy_amt * 1000) / 1000\n      pay_amt = Math.round(pay_amt * 1000) / 1000\n      return [price, buy_amt, pay_amt]\n    } else {\n      price = Math.round(buy_amt / pay_amt * 1000) / 1000\n      buy_amt = Math.round(buy_amt * 1000) / 1000\n      pay_amt = Math.round(pay_amt * 1000) / 1000\n      return [price, pay_amt, buy_amt]\n    }\n  }\n\n  eventsToOrders(events) {\n    let account = this.props.drizzleState.accounts[0]\n    var orders = []\n    for(var i = 0; i < events.length; i++) {\n      var order = events[i].returnValues\n      var type = this.getType(order)\n      var pay_amt = this.props.drizzle.web3.utils.fromWei(order[\"give_amt\"].toString(), 'ether')\n      var buy_amt = this.props.drizzle.web3.utils.fromWei(order[\"take_amt\"].toString(), 'ether')\n      var true_type = type\n      if(order[\"maker\"] === account) {\n        if(type === \"BUY\") {\n          true_type = \"SELL\"\n        } else {\n          true_type = \"BUY\"\n        }\n      }\n      var offer = this.getPrice(pay_amt, buy_amt, type)\n      var timestamp = new Date(order[\"timestamp\"] * 1000)\n      timestamp = timestamp.toLocaleTimeString() + \" \" + timestamp.toLocaleDateString()\n      order = {\n        \"timestamp\": timestamp,\n        \"type\": true_type,\n        \"price\": offer[0],\n        \"curr_1\": offer[1],\n        \"curr_2\": offer[2],\n        \"taker\": order[\"taker\"],\n        \"maker\": order[\"maker\"]\n      }\n      orders.push(order)\n    }\n    orders.reverse()\n    return orders\n  }\n\n  async getPastOrders() {\n    var { currencies, drizzle, drizzleState } = this.props\n    var { Market } = drizzle.contracts\n    let account = drizzleState.accounts[0]\n    var web3 = drizzle.web3\n    var latestBlock = await web3.eth.getBlockNumber()\n\n    var curr_1_addr = drizzle.contracts[currencies[0]].address\n    var curr_2_addr = drizzle.contracts[currencies[1]].address\n    const hashKey1 = web3.utils.soliditySha3(curr_1_addr, curr_2_addr)\n    const hashKey2 = web3.utils.soliditySha3(curr_2_addr, curr_1_addr)\n\n    const market = new web3.eth.Contract(Market.abi, Market.address)\n    var taker_events = await market.getPastEvents(\"LogTake\", {\n      filter: { pair: [hashKey1, hashKey2], taker: account },\n      fromBlock: latestBlock - 25000,\n      toBlock: 'latest'\n    })\n    var maker_events = await market.getPastEvents(\"LogTake\", {\n      filter: { pair: [hashKey1, hashKey2], maker: account },\n      fromBlock: latestBlock - 25000,\n      toBlock: 'latest'\n    })\n\n    var events = maker_events.concat(taker_events)\n\n    events.sort(function(first, second) {\n      return first.returnValues.timestamp - second.returnValues.timestamp\n    })\n\n    var orders = this.eventsToOrders(events)\n    return orders\n  }\n\n  render() {\n    var { loading, orders, max_order } = this.state\n    var { currencies } = this.props\n\n    var offers_table = null\n    var background_item = null\n\n    if(loading) {\n      background_item = (<div id=\"MarketHistory-empty\">Loading...</div>)\n    } else if(orders.length === 0) {\n      background_item = (<div id=\"MarketHistory-empty\">NO ORDERS</div>)\n    } else {\n      offers_table = (<Table.Body id=\"MarketHistory-tableBody\">\n            {orders.map((item, index) => {\n              var ratio = item[\"curr_2\"]/max_order * 100\n              var direction = \"right\"\n              var color_0 = \"rgba(255, 0, 0, 0.2)\"\n              var color_1 = \"rgba(0,0,0,0)\"\n              if(item[\"type\"] === \"BUY\") {\n                color_0 = \"rgba(0, 255, 0, 0.1)\"\n                color_1 = \"rgba(0, 0, 0, 0)\"\n              }\n              var style = { backgroundImage: `linear-gradient(to ${direction}, ${color_0} , ${color_0}), linear-gradient(to ${direction}, ${color_1}, ${color_1})` ,\n                backgroundSize: `calc(${ratio}%) 100%`,\n                backgroundRepeat: `no-repeat`\n              }\n              var type = item[\"type\"] === \"BUY\" ? (<span className=\"green MarketHistory-type\">BUY</span>) : (<span className=\"red MarketHistory-type\">SELL</span>)\n              return (\n                <Table.Row key={index} style={style}>\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{type}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{item[\"timestamp\"]}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{this.numberWithCommas(item[\"price\"])}</div>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <div className='MarketHistory-table-entry'>{this.numberWithCommas(item[\"curr_1\"])}</div>\n                  </Table.Cell>\n\n                  <Table.Cell  textAlign='left'>\n                    <div className='MarketHistory-table-entry'>{this.numberWithCommas(item[\"curr_2\"])}</div>\n                  </Table.Cell>\n                </Table.Row>\n              )\n            })}\n          </Table.Body>)\n    }\n\n    return (\n      <div className=\"MarketHistory\">\n        <Table striped basic celled unstackable id=\"MarketHistory-table\">\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>Type</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>Time</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>Price</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>{currencies[0]}</Table.HeaderCell>\n              <Table.HeaderCell className='MarketHistory-table-header' textAlign='left'>{currencies[1]}</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          { offers_table }\n        </Table>\n        { background_item }\n      </div>\n    );\n  }\n}\n\nexport default MyHistory\n","import React, { Component } from 'react'\nimport { Sidebar, Segment, Icon, Input, Form, Button, Loader } from 'semantic-ui-react'\n\nimport './sidebar.css'\n\nclass SideBar extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n      visible: false,\n      amount: '0',\n      ui_amount: '',\n      currency_0_balance: \"0\",\n      currency_1_balance: \"0\",\n      id: null,\n      info: null,\n      owner: null,\n      bignumbers: {},\n      button_loading: false,\n      button_success: false,\n      button_error: false\n    }\n\n    this.updateInfo = this.updateInfo.bind(this)\n    this.stopLoading = this.stopLoading.bind(this)\n    this.flashError = this.flashError.bind(this)\n    this.flashSuccess = this.flashSuccess.bind(this)\n  }\n\n  // Get the balances for each of the currencies since we will need that throughout the component\n  componentDidMount() {\n    this.generateBigNumbers()\n    this.updateInfo()\n  }\n\n  async updateInfo() {\n    var { drizzle, drizzleState, currencies } = this.props\n    if(this.state.visible && this.state.id) {\n      let account = drizzleState.accounts[0]\n\n      const currency_0_balance = await drizzle.contracts[currencies[0]].methods.balanceOf(account).call()\n      const currency_1_balance = await drizzle.contracts[currencies[1]].methods.balanceOf(account).call()\n      const info = await drizzle.contracts.Market.methods.getOffer(this.state.id).call()\n      const owner = await drizzle.contracts.Market.methods.getOwner(this.state.id).call()\n      this.setState({ currency_0_balance, currency_1_balance, info, owner })\n    }\n    setTimeout(this.updateInfo, 1000)\n  }\n\n  generateBigNumbers() {\n    var bignumbers = {}\n    for(var i = 0; i <= 10; i++) {\n      var key = i\n      bignumbers[key] = this.props.drizzle.web3.utils.toBN(key)\n    }\n\n    this.setState({ bignumbers })\n  }\n\n  stopLoading() {\n    this.setState({ loading: false })\n  }\n\n  // Need to update visible and the side_bar info key if a new order is passed in\n  async componentWillReceiveProps(nextProps) {\n    if(nextProps.visible !== this.props.visible) {\n      this.setState({ visible: nextProps.visible })\n      if(nextProps.visible === false) {\n        this.setState({ info: null, owner: null, amount: '0', ui_amount: '', button_success: false, button_error: false, button_loading: false })\n      }\n    }\n    if(nextProps.sidebar_info !== this.props.sidebar_info) {\n      this.setState({ loading: true })\n      const info = await this.props.drizzle.contracts.Market.methods.getOffer(nextProps.sidebar_info[\"id\"]).call()\n      const owner = await this.props.drizzle.contracts.Market.methods.getOwner(nextProps.sidebar_info[\"id\"]).call()\n      this.setState({ id: nextProps.sidebar_info[\"id\"], info, owner, amount: '0', ui_amount: '' })\n      setTimeout(this.stopLoading, 150)\n    }\n  }\n\n  flashSuccess() {\n    var { toggleSidebar } = this.props\n    this.setState({ button_success : true, button_loading: false })\n    setTimeout(toggleSidebar, 1500)\n  }\n\n  flashError() {\n    this.setState({ button_error: true, button_loading: false })\n    setTimeout(() => this.setState({ button_error: false }), 1500)\n  }\n\n  // Most important function in the entire file since it actually interfaces\n  // and edits the blockchain.\n  executeTrade = () => {\n    var { drizzle, drizzleState, sidebar_info } = this.props\n    const account = drizzleState.accounts[0]\n    const web3 = drizzle.web3\n\n    var amount = this.state.amount === \"\" ? \"0\" : this.state.amount.toString()\n    var will_receive = amount\n    will_receive = web3.utils.fromWei(will_receive, 'ether')\n    if(sidebar_info[\"type\"] === \"SELL\") {\n      will_receive /= sidebar_info[\"price\"]\n      will_receive = web3.utils.toWei(will_receive.toString(), 'ether')\n      if(web3.utils.toBN(will_receive).gt(web3.utils.toBN(this.state.info[0]))) {\n        will_receive = this.state.info[0]\n      }\n      if(web3.utils.toBN(amount).gte(web3.utils.toBN(this.state.currency_1_balance))) {\n        let balance_bn = web3.utils.toBN(this.state.currency_1_balance)\n        let offer_curr_1_bn = web3.utils.toBN(this.state.info[2])\n        let offer_curr_0_bn = web3.utils.toBN(this.state.info[0])\n        will_receive = balance_bn.mul(offer_curr_0_bn).div(offer_curr_1_bn)\n      }\n    } else {\n      will_receive *= sidebar_info[\"price\"]\n      will_receive = web3.utils.toWei(will_receive.toString(), 'ether')\n      if(web3.utils.toBN(will_receive).gt(web3.utils.toBN(this.state.info[2]))) {\n        will_receive = this.state.info[2]\n      }\n      if(web3.utils.toBN(amount).gte(web3.utils.toBN(this.state.currency_0_balance))) {\n        let balance_bn = web3.utils.toBN(this.state.currency_0_balance)\n        let offer_curr_1_bn = web3.utils.toBN(this.state.info[0])\n        let offer_curr_0_bn = web3.utils.toBN(this.state.info[2])\n        will_receive = balance_bn.mul(offer_curr_1_bn).div(offer_curr_0_bn)\n      }\n    }\n\n    var id = sidebar_info[\"id\"]\n\n    drizzle.contracts.Market.methods.buy(id, will_receive.toString()).send({from: account, gasPrice: web3.utils.toWei('5', 'gwei') })\n      .on('receipt', this.flashSuccess)\n      .on('error', this.flashError)\n\n    this.setState({ button_loading: true })\n\n    // this.setState({ visible: false, amount: '0', ui_amount: '', info_key: null })\n  }\n\n  numberWithCommas(x) {\n    var parts = x.toString().split(\".\");\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    return parts.join(\".\");\n  }\n\n  handleUserChange(value) {\n    var internal_value = 0\n    try{\n      if(/\\S/.test(value)) {\n        internal_value = this.props.drizzle.web3.utils.toWei(value.toString(), 'ether').toString()\n      }\n    } catch (err) {\n      console.log(err)\n      return\n    }\n    this.setState({ ui_amount: value, amount: internal_value })\n  }\n\n  handleAmountPercentageChange(value) {\n    var ui_value = this.props.drizzle.web3.utils.fromWei(value.toString(), 'ether')\n    this.setState({ amount: value.toString(), ui_amount: ui_value })\n  }\n\n  // So we were passed in the most up to date info the older component had.\n  // However this can and will change if it was stale or other people are taking the order.\n  // This keeps the info up to date and fallsback onto the old data if an error happens.\n  getUpdatedInfo() {\n    var { info } = this.state\n    var { sidebar_info } = this.props\n\n    var info_obj = {}\n    if(!info) {\n      return null\n    }\n\n    var buy_amt = info[0]\n    var pay_amt = info[2]\n    if(sidebar_info[\"type\"] === \"BUY\") {\n      info_obj = {\n        \"price\": sidebar_info[\"price\"],\n        \"curr_0_amt\": pay_amt.toString(),\n        \"curr_1_amt\": buy_amt.toString()\n      }\n    } else {\n      info_obj = {\n        \"price\": sidebar_info[\"price\"],\n        \"curr_0_amt\": buy_amt.toString(),\n        \"curr_1_amt\": pay_amt.toString()\n      }\n    }\n\n    return info_obj\n  }\n\n  render() {\n    var { visible, amount, ui_amount, currency_0_balance, currency_1_balance, bignumbers, loading, button_loading, button_error, button_success, owner } = this.state\n    var { currencies, toggleSidebar, sidebar_info } = this.props\n    const web3 = this.props.drizzle.web3\n\n    // Invert the type since the action do as a taker is the inverse of the action of the maker\n    var action = sidebar_info[\"type\"] === \"BUY\" ? \"SELL\" : \"BUY\"\n    var subtitle = action === \"BUY\" ? (<span className=\"green\">{action}</span>) : (<span className=\"red\">SELL</span>)\n\n    // So we were passed in the most up to date info the older component had.\n    // However this can and will change if it was stale or other people are taking the order.\n    // This keeps the info up to date and fallsback onto the old data if an error happens.\n    var updated_info = this.getUpdatedInfo()\n    if(!updated_info || loading) {\n      return (\n        <div className=\"Side_bar\">\n          <Sidebar as={Segment} animation=\"overlay\" direction=\"right\" visible={visible} id=\"Side_bar\">\n            <div id=\"Side_bar-x-container\">\n              <Icon name=\"close\" onClick={toggleSidebar} id=\"Side_bar-x\" size=\"large\" />\n            </div>\n            <div id=\"Side_bar-title\">Take Order</div>\n            <Loader active>Loading</Loader>\n          </Sidebar>\n        </div>\n      )\n    }\n\n    // Build object that swaps values for buys and sells so that rendering is simple\n    var giving = {\n      \"currency\": null,\n      \"balance\": 0,\n      \"offered\": 0,\n      \"max_take\": 0,\n      \"receive_currency\": null,\n      \"will_receive\": 0\n    }\n    var will_receive = ui_amount === \"\" ? 0 : ui_amount\n\n    if(action === \"BUY\") {\n      giving[\"currency\"] = currencies[1]\n      giving[\"receive_currency\"] = currencies[0]\n      giving[\"balance\"] = web3.utils.toBN(currency_1_balance)\n      giving[\"ui_balance\"] = Math.round(web3.utils.fromWei(currency_1_balance.toString(), 'ether') * 1000) / 1000\n      giving[\"offered\"] = web3.utils.toBN(updated_info[\"curr_1_amt\"])\n      giving[\"ui_offered\"] = Math.round(web3.utils.fromWei(updated_info[\"curr_1_amt\"], 'ether') * 1000) / 1000\n      giving[\"will_receive\"] = Math.round((will_receive / updated_info[\"price\"]) * 1000) / 1000\n    } else {\n      giving[\"currency\"] = currencies[0]\n      giving[\"receive_currency\"] = currencies[1]\n      giving[\"balance\"] = web3.utils.toBN(currency_0_balance)\n      giving[\"ui_balance\"] = Math.round(web3.utils.fromWei(currency_0_balance.toString(), 'ether') * 1000) / 1000\n      giving[\"offered\"] = web3.utils.toBN(updated_info[\"curr_0_amt\"])\n      giving[\"ui_offered\"] = Math.round(web3.utils.fromWei(updated_info[\"curr_0_amt\"], 'ether') * 1000) / 1000\n      giving[\"will_receive\"] = Math.round((will_receive * updated_info[\"price\"]) * 1000) / 1000\n    }\n    giving[\"max_take\"] = giving[\"balance\"].lt(giving[\"offered\"]) ? giving[\"balance\"] : giving[\"offered\"]\n\n    var button_text = action + \" \" + currencies[0]\n    if(button_success) {\n      button_text = \"SUCCESS\"\n    }\n    if(button_error) {\n      button_text = \"FAILED\"\n    }\n\n    var maker = owner ? owner.substring(0, 10) + \" ... \" + owner.substring(owner.length - 10, owner.length) : \"Loading...\"\n\n    return (\n      <div className=\"Side_bar\">\n        <Sidebar as={Segment} animation=\"overlay\" direction=\"right\" visible={visible} id=\"Side_bar\">\n          <div id=\"Side_bar-x-container\">\n            <Icon name=\"close\" onClick={toggleSidebar} id=\"Side_bar-x\" size=\"large\" />\n          </div>\n          <div id=\"Side_bar-title\">Take Order</div>\n          <div id=\"Side_bar-subtitle\">How much would you like to {subtitle}?</div>\n          \n          <div id=\"Side_bar-info\">\n            <div className=\"Side_bar-info-item\">\n              <div className=\"Side_bar-info-title\">Maker:</div>\n              <div className=\"Side_bar-info-content\">{maker}</div>\n            </div>\n\n            <div className=\"Side_bar-info-item\">\n              <div className=\"Side_bar-info-title\">Price:</div>\n              <div className=\"Side_bar-info-content\">{this.numberWithCommas(updated_info[\"price\"])} <span id=\"Side_bar-exchange\">{currencies[1]} / {currencies[0]}</span></div>\n            </div>\n\n            <div className=\"Side_bar-info-item\">\n              <div className=\"Side_bar-info-title\">Balance {giving[\"currency\"]}:</div>\n              <div className=\"Side_bar-info-content\">{this.numberWithCommas(giving[\"ui_balance\"])} <span id=\"Side_bar-exchange\">{giving[\"currency\"]}</span></div>\n            </div>\n\n            <div className=\"Side_bar-info-item\">\n              <div className=\"Side_bar-info-title\">Offered {giving[\"currency\"]}:</div>\n              <div className=\"Side_bar-info-content\">{this.numberWithCommas(giving[\"ui_offered\"])} <span id=\"Side_bar-exchange\">{giving[\"currency\"]}</span></div>\n            </div>\n          </div>\n\n          <Form size='tiny' id=\"Side_bar-form\">\n            <Form.Field>\n              <div>\n                <div className=\"Side_bar-info-title\">Spend {giving[\"currency\"]}:</div>\n                <Input\n                  label={{ basic: true, content: giving[\"currency\"] }}\n                  labelPosition='right'\n                  placeholder='Enter Amount...'\n                  value={ui_amount}\n                  onChange={(e) => { this.handleUserChange(e.target.value) }}\n                />\n              </div>\n            </Form.Field>\n            <Button.Group id=\"Side_bar-mini-buttons\" size='mini' basic>\n              <Button onClick={ () => this.handleUserChange(\"\") } >0%</Button>\n              <Button onClick={ () => this.handleAmountPercentageChange(giving[\"max_take\"].div(bignumbers[4])) } >25%</Button>\n              <Button onClick={ () => this.handleAmountPercentageChange(giving[\"max_take\"].div(bignumbers[2])) } >50%</Button>\n              <Button onClick={ () => this.handleAmountPercentageChange(giving[\"max_take\"].mul(bignumbers[3]).div(bignumbers[4])) } >75%</Button>\n              <Button onClick={ () => this.handleAmountPercentageChange(giving[\"max_take\"]) } >100%</Button>\n            </Button.Group>\n          </Form>\n          <div className=\"Side_bar-info-item\">\n            <div className=\"Side_bar-info-title\">Will Receive</div>\n            <div className=\"Side_bar-info-content\">{giving[\"will_receive\"].toString() + \" \" + giving[\"receive_currency\"]}</div>\n          </div>\n\n          <Button className=\"BuySell-button\" loading={button_loading} color={action === \"BUY\" ? \"green\" : \"red\"} disabled={button_text !== action + \" \" + currencies[0] || ui_amount === \"\" || web3.utils.toBN(amount).gt(giving[\"max_take\"])} onClick={this.executeTrade}>{button_text}</Button>\n\n        </Sidebar>\n      </div>\n    );\n  }\n}\n\nexport default SideBar\n","import React, { Component } from 'react'\nimport { Grid, Tab } from 'semantic-ui-react'\n\n// import Chart from './chart/chart'\nimport OrderList from './orderlist/orderlist'\nimport BuySell from './buysell/buysell'\nimport MyOrders from './myorders/myorders'\nimport Stats from './stats/stats'\nimport MarketHistory from './markethistory/markethistory'\nimport MyHistory from './myhistory/myhistory'\nimport SideBar from './sidebar/sidebar'\n\nimport './market.css'\n\nclass Market extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      currencies: [],\n      visible: false,\n      sidebar_info: {\n        \"price\": 0,\n        \"curr_0_amt\": 0,\n        \"curr_1_amt\": 0,\n        \"id\": \"\",\n        \"type\": \"\"\n      },\n      keys: {\n        numBuys: null,\n        numSells: null\n      }\n    }\n  }\n\n  componentWillMount() {\n    var currencies = this.props.pair.split(\"_\")\n    this.setState({currencies})\n  }\n\n  componentDidMount() {\n    var { drizzle } = this.props\n    var { currencies } = this.state\n\n    var buy_token_addr = drizzle.contracts[currencies[0]].address\n    var sell_token_addr = drizzle.contracts[currencies[1]].address\n\n    const numBuysKey = drizzle.contracts.Market.methods.getOfferCount.cacheCall(sell_token_addr, buy_token_addr)\n    const numSellsKey = drizzle.contracts.Market.methods.getOfferCount.cacheCall(buy_token_addr, sell_token_addr)\n\n    let keys = Object.assign({}, this.state.keys)\n    keys[\"numBuys\"] = numBuysKey\n    keys[\"numSells\"] = numSellsKey\n\n    this.setState({currencies, keys})\n  }\n\n  setSidebar = (info) => {\n    this.setState({ sidebar_info: info, visible: true })\n  }\n\n  toggleSidebar = () => {\n    this.setState({ visible: !this.state.visible })\n  }\n\n  render() {\n    var { currencies, keys, visible, sidebar_info } = this.state\n    var { Market } = this.props.drizzleState.contracts\n    var { drizzle, drizzleState } = this.props\n\n    var title = \"Market: \"\n    if(currencies.length === 2) {\n      title = title + currencies[0] + \"/\" + currencies[1]\n    }\n\n    var numBuys = \"Loading...\"\n    var numSells = \"Loading...\"\n\n    if(keys[\"numBuys\"] in Market.getOfferCount) {\n      numBuys = Market.getOfferCount[keys[\"numBuys\"]].value\n    }\n    if(keys[\"numSells\"] in Market.getOfferCount) {\n      numSells = Market.getOfferCount[keys[\"numSells\"]].value\n    }\n\n    if(!numBuys) {\n      numBuys = \"Error...\"\n    }\n    if(!numSells) {\n      numSells = \"Error...\"\n    }\n\n    const panes = [\n      { menuItem: 'Open Orders', render: () => <Tab.Pane className=\"Market-tab-pane\"><MyOrders currencies={currencies} drizzle={drizzle} drizzleState={drizzleState} /></Tab.Pane> },\n      { menuItem: 'My History', render: () => <Tab.Pane className=\"Market-tab-pane\"><MyHistory currencies={currencies} drizzle={drizzle} drizzleState={drizzleState} /></Tab.Pane> },\n      { menuItem: 'Market History', render: () => <Tab.Pane className=\"Market-tab-pane\"><MarketHistory currencies={currencies} drizzle={drizzle} drizzleState={drizzleState} /></Tab.Pane> },\n    ]\n\n    return (\n      <div className=\"Market\">\n        <SideBar currencies={currencies} toggleSidebar={this.toggleSidebar} sidebar_info={sidebar_info} visible={visible} drizzle={drizzle} drizzleState={ drizzleState } />\n        <div id=\"Market-title\"><span className=\"Market-h1\">{title}</span></div>\n\n        <div className=\"Market-headers\">24-Hour Market Stats</div>\n        <div id=\"Market-stats\"><Stats currencies={currencies} drizzle={drizzle} drizzleState={ drizzleState } /></div>\n \n        <div className=\"Market-headers\">Activity Pane</div>\n        <div id=\"Market-activity-pane\">\n          <Tab menu={{ fluid: true, tabular: true, attached: 'top' }} panes={panes} />\n        </div>\n\n        <div className=\"Market-headers\">Make Order</div>\n        <div id=\"Market-buysell\"><BuySell currencies={currencies} drizzle={drizzle} drizzleState={ drizzleState } /></div>\n        \n        <Grid divided id=\"Market-orderlists\">\n          <Grid.Row>\n            <Grid.Column className=\"Market-orderlist\" computer={8} tablet={8} mobile={16}>\n              <div className=\"Market-headers\">{currencies[0]} <span className=\"green\">Buy</span> Orders ({numBuys})</div>\n              <OrderList currencies={currencies} type={\"BUY\"} drizzle={drizzle} drizzleState={ drizzleState } setSidebar={this.setSidebar} />\n            </Grid.Column>\n            <Grid.Column className=\"Market-orderlist\" computer={8} tablet={8} mobile={16}>\n              <div className=\"Market-headers\">{currencies[0]} <span className=\"red\">Sell</span> Orders ({numSells})</div>\n              <OrderList currencies={currencies} type={\"SELL\"} drizzle={drizzle} drizzleState={ drizzleState } setSidebar={this.setSidebar} />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      \n      </div>\n    );\n  }\n}\n\nexport default Market\n","import React, { Component } from 'react'\nimport { Transition } from 'semantic-ui-react'\nimport './home.css'\n\nclass Home extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n    }\n  }\n\n  componentDidMount() {\n\n  }\n\n  componentDidUpdate() {\n  }\n\n  render() {\n    return (\n      <div id=\"Home\">\n        <Transition transitionOnMount={true} animation='fade up' duration={1500}>\n          <div id=\"Home-title\">\n            OasisX\n          </div>\n        </Transition>\n        <Transition transitionOnMount={true} animation='fade up' duration={3500}>\n          <div id=\"Home-subtitle\">\n            The fastest UI for Oasis.\n          </div>\n        </Transition>\n      </div>\n    )\n  }\n}\n\nexport default Home;","import React, { Component } from 'react'\nimport { Input, Form, Button } from 'semantic-ui-react'\n\nimport './wrapstation.css'\n\nclass WrapStation extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      amount_wrap: '0',\n      ui_amount_wrap: '',\n      amount_unwrap: '0',\n      ui_amount_unwrap: '',\n      bignumbers: {}\n    }\n  }\n\n  componentDidMount() {\n    var bignumbers = {}\n    for(var i = 0; i <= 10; i++) {\n      var key = i\n      bignumbers[key] = this.props.drizzle.web3.utils.toBN(key)\n    }\n\n    this.setState({ bignumbers })\n  }\n\n  handlePercentUpdate(name, value) {\n    var ui_value = this.props.drizzle.web3.utils.fromWei(value.toString(), 'ether')\n    if(name === \"amount_wrap\") {\n      this.setState({ amount_wrap: value, ui_amount_wrap: ui_value })\n    } else if(name === \"amount_unwrap\") {\n      this.setState({ amount_unwrap: value, ui_amount_unwrap: ui_value })\n    } else {\n      return\n    }\n  }\n\n  handleUserUpdate(name, value) {\n    var internal_value = 0\n    try{\n      if(/\\S/.test(value)) {\n        internal_value = this.props.drizzle.web3.utils.toWei(value.toString(), 'ether')\n      }\n    } catch (err) {\n      console.log(err)\n      return\n    }\n\n    if(name === \"ui_amount_wrap\") {\n      this.setState({ ui_amount_wrap: value, amount_wrap: internal_value })\n    } else if(name === \"ui_amount_unwrap\") {\n      this.setState({ ui_amount_unwrap: value, amount_unwrap: internal_value })\n    } else {\n      return\n    }\n  }\n\n  onWrap = () => {\n    // Grab the wrap function from the contract instance and the account and amount we want to execute it with\n    const deposit = this.props.drizzle.contracts.WETH.methods.deposit\n    const account = this.props.drizzleState.accounts[0]\n    var amount = this.state.amount_wrap\n    var web3 = this.props.drizzle.web3\n\n    // Need to check if the amount value is an empty string/undefined/null and that it's greater than 0\n    if(amount && amount > 0) {\n      console.log(\"SENDING \" + amount + \" TO WRAPPER...\")\n      deposit.cacheSend({value: amount, from: account, gasPrice: web3.utils.toWei('5', 'gwei') })\n      this.setState({ amount_wrap: '0', ui_amount_wrap: '' })\n    } else {\n      console.log(\"Error: No amount chosen\")\n    }\n  }\n\n  onUnwrap = () => {\n    const withdraw = this.props.drizzle.contracts.WETH.methods.withdraw\n    const account = this.props.drizzleState.accounts[0]\n    var amount = this.state.amount_unwrap\n    var web3 = this.props.drizzle.web3\n\n    if(amount && amount > 0) {\n      console.log(\"SENDING \" + amount + \" TO UNWRAPPER...\")\n      withdraw.cacheSend(amount.toString(), {from: account, gasPrice: web3.utils.toWei('5', 'gwei') })\n      this.setState({ amount_unwrap: '0', ui_amount_unwrap: '' })\n    } else {\n      console.log(\"Error: No amount chosen\")\n    }\n  }\n\n  render() {\n    var { weth_balance, eth_balance } = this.props\n    var { ui_amount_wrap, ui_amount_unwrap, bignumbers } = this.state\n\n    // Convert to BigNumbers since they will have potential math done on them (risk of overflow/underflow)\n    eth_balance = this.props.drizzle.web3.utils.toBN(eth_balance)\n    weth_balance = this.props.drizzle.web3.utils.toBN(weth_balance)\n\n    return (\n      <div className=\"WrapStation\">\n        <div id=\"WrapStation-title\">Wrap / Unwrap</div>\n        <Form onSubmit={this.handleSubmit} size='tiny' id=\"WrapStation-form\">\n          <div className=\"WrapStation-headers\">Wrap <span id=\"WrapStation-warning\"><span className=\"red\">WARNING:</span> DO NOT WRAP ALL YOUR ETHER</span></div>\n          <Form.Group unstackable className=\"WrapStation-formgroup\">\n            <Form.Field width={11}>\n              <Input\n                label={{ basic: true, content: \"ETH\" }}\n                labelPosition='right'\n                placeholder='Enter Amount ETH...'\n                value={ui_amount_wrap}\n                onChange={(e) => { this.handleUserUpdate('ui_amount_wrap', e.target.value) }}\n              />\n            </Form.Field>\n            <Form.Button width={4} className=\"WrapStation-button\" color='green' size='small' disabled={ui_amount_wrap === \"\"} onClick={ () => this.onWrap() } >WRAP</Form.Button>\n          </Form.Group>\n          <Button.Group className=\"WrapStation-mini-buttons\" size='mini' basic inverted>\n            <Button onClick={ () => this.handleUserUpdate(\"ui_amount_wrap\", \"\") } >0%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_wrap\", eth_balance.div(bignumbers[4])) } >25%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_wrap\", eth_balance.div(bignumbers[2])) } >50%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_wrap\", eth_balance.mul(bignumbers[3]).div(bignumbers[4])) } >75%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_wrap\", eth_balance.mul(bignumbers[9]).div(bignumbers[10])) } >90%</Button>\n          </Button.Group>\n          <div className=\"WrapStation-headers\">Unwrap</div>\n          <Form.Group unstackable className=\"WrapStation-formgroup\">\n            <Form.Field width={10}>\n              <Input\n                label={{ basic: true, content: \"WETH\" }}\n                labelPosition='right'\n                placeholder='Enter Amount WETH...'\n                value={ui_amount_unwrap}\n                onChange={(e) => { this.handleUserUpdate('amount_unwrap', e.target.value) }}\n              />\n            </Form.Field>\n            <Form.Button width={4} className=\"WrapStation-button\" color='green' size='small' disabled={ui_amount_unwrap === \"\"} onClick={ () => this.onUnwrap() } >UNWRAP</Form.Button>\n          </Form.Group>\n          <Button.Group className=\"WrapStation-mini-buttons\" size='mini' basic inverted>\n            <Button onClick={ () => this.handleUserUpdate(\"ui_amount_unwrap\", \"\") } >0%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_unwrap\", weth_balance.div(bignumbers[4])) } >25%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_unwrap\", weth_balance.div(bignumbers[2])) } >50%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_unwrap\", weth_balance.mul(bignumbers[3]).div(bignumbers[4])) } >75%</Button>\n            <Button onClick={ () => this.handlePercentUpdate(\"amount_unwrap\", weth_balance) } >100%</Button>\n          </Button.Group>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default WrapStation\n","import React, { Component } from 'react'\nimport { Header, Table, Checkbox, Icon } from 'semantic-ui-react'\nimport './infobar.css'\n\nimport WrapStation from './wrapstation/wrapstation'\n\nclass Infobar extends Component {\n  constructor(props, context) {\n    super(props)\n    this.state = {\n      currencies: {\n        \"WETH\": {\n          balance: 0,\n          approved: 0\n        },\n        \"DAI\": {\n          balance: 0,\n          approved: 0\n        },\n        \"MKR\": {\n          balance: 0,\n          approved: 0\n        },\n        \"ETH\": {\n          balance: 0,\n          approved: 0\n        }\n      }\n    }\n\n    this.updateInfo = this.updateInfo.bind(this)\n  }\n\n  componentDidMount() {\n    this.updateInfo()\n  }\n\n  async updateInfo() {\n    const { drizzle, drizzleState } = this.props\n    let account = drizzleState.accounts[0]\n    let market_address = drizzle.contracts.Market.address\n    \n    const weth_balance = await drizzle.contracts.WETH.methods.balanceOf(account).call()\n    const dai_balance = await drizzle.contracts.DAI.methods.balanceOf(account).call()\n    const mkr_balance = await drizzle.contracts.MKR.methods.balanceOf(account).call()\n    \n    const weth_approval = await drizzle.contracts.WETH.methods.allowance(account, market_address).call()\n    const dai_approval = await drizzle.contracts.DAI.methods.allowance(account, market_address).call()\n    const mkr_approval = await drizzle.contracts.MKR.methods.allowance(account, market_address).call()\n    \n    var eth_balance = drizzleState.accountBalances[account]\n\n    var currencies = {\n      \"WETH\": {\n        balance: weth_balance,\n        approved: weth_approval\n      },\n      \"DAI\": {\n        balance: dai_balance,\n        approved: dai_approval\n      },\n      \"MKR\": {\n        balance: mkr_balance,\n        approved: mkr_approval\n      },\n      \"ETH\": {\n        balance: eth_balance,\n        approved: \"115792089237316195423570985008687907853269984665640564039457584007913129639935\"\n      }\n    }\n\n    this.setState({ currencies })\n\n    setTimeout(this.updateInfo, 2500)\n  }\n\n  approveCurrencyForAmount(currency, amount) {\n    var { drizzle, drizzleState } = this.props\n    var account = drizzleState.accounts[0]\n    let market_address = drizzle.contracts.Market.address\n    var web3 = drizzle.web3\n\n    if(currency in drizzle.contracts) {\n      var currency_contract = drizzle.contracts[currency]\n      \n      var approve = currency_contract.methods.approve\n      approve.cacheSend(market_address, amount, {from: account, gasPrice: web3.utils.toWei('5', 'gwei') })\n    }\n  }\n\n  approveCurrency(currency) {\n    this.approveCurrencyForAmount(currency, \"115792089237316195423570985008687907853269984665640564039457584007913129639935\")\n  }\n\n  unapproveCurrency(currency) {\n    this.approveCurrencyForAmount(currency, \"0\")\n  }\n\n  toggleApproval(currency, current_approval) {\n    let new_approval = !current_approval\n    if(new_approval) {\n      this.approveCurrency(currency)\n    } else {\n      this.unapproveCurrency(currency)\n    }\n  }\n\n  getUIBalance(raw_balance) {\n    let UI_balance = raw_balance\n    if(raw_balance != null) {\n      UI_balance = Math.round(this.props.drizzle.web3.utils.fromWei(raw_balance.toString(), 'ether') * 1000) / 1000\n    } else {\n      UI_balance = \"Error...\"\n    }\n    return UI_balance    \n  }\n\n  getUIAllowance(raw_balance, raw_allowance) {\n    const web3 = this.props.drizzle.web3\n    let UI_allowance = false\n    raw_allowance = web3.utils.toBN(raw_allowance)\n    let balance = web3.utils.toBN(raw_balance)\n    if(raw_allowance.gte(balance)) {\n      UI_allowance = true\n    } else {\n      UI_allowance = false\n    }\n    return UI_allowance\n  }\n\n  render() {\n    const { currencies } = this.state\n    const { padded, closeSidebar, drizzle, drizzleState } = this.props\n    let account = drizzleState.accounts[0]\n\n    const vals = Object.keys(currencies).map((key) => {\n      var obj = {}\n      obj[\"name\"] = key\n      obj[\"balance\"] = \"0\"\n      obj[\"approved\"] = false\n      var raw_balance = currencies[key][\"balance\"]\n      var raw_allowance = currencies[key][\"approved\"]\n      if(raw_balance && raw_allowance) {\n        obj[\"balance\"] = this.getUIBalance(raw_balance)\n        obj[\"approved\"] = this.getUIAllowance(raw_balance, raw_allowance)      \n      }\n      return obj\n    })\n\n    var padding = null\n    var ui_account = account\n    var x_icon = <Icon name=\"close\" id=\"Infobar-x\" size=\"large\" onClick={closeSidebar} />\n    if(padded) {\n      padding = \"very\"\n      x_icon = null\n    } else {\n      if(ui_account) {\n        ui_account = ui_account.substring(0, 10) + \" ... \" + ui_account.substring(ui_account.length - 10, ui_account.length) \n      }\n    }\n\n    return (\n      <div id='Infobar'>\n        <div className='Infobar-header'>{ui_account}{x_icon}</div>\n        <Table basic='very' padded={padding} striped unstackable id=\"Infobar-table\">\n          <Table.Header id=\"Infobar-table-header\">\n            <Table.Row>\n              <Table.HeaderCell className='Infobar-table-entry' textAlign='left'>Token</Table.HeaderCell>\n              <Table.HeaderCell className='Infobar-table-entry' textAlign='left'>Balance</Table.HeaderCell>\n              <Table.HeaderCell className='Infobar-table-entry' textAlign='left'>Approved</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Body>\n            {vals.map((item, index) => {\n              return (\n                <Table.Row key={index}>\n                  <Table.Cell>\n                    <Header className='Infobar-table-entry' textAlign='left'>{item.name}</Header>\n                  </Table.Cell>\n\n                  <Table.Cell>\n                    <Header className='Infobar-table-entry' textAlign='left'>{item.balance}</Header>\n                  </Table.Cell>\n\n                  <Table.Cell  textAlign='left'>\n                    <Checkbox toggle disabled={item.name === \"ETH\"} checked={item.approved} onClick={ () => this.toggleApproval(item.name, item.approved) } />\n                  </Table.Cell>\n                </Table.Row>\n              )\n            })}\n          </Table.Body>\n        </Table>\n\n        <WrapStation drizzle={drizzle} drizzleState={drizzleState} weth_balance={currencies[\"WETH\"][\"balance\"]} eth_balance={currencies[\"ETH\"][\"balance\"]} />\n      </div>\n    )\n  }\n}\n\nexport default Infobar;","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Menu, Responsive, Icon, Dropdown, Sidebar, Segment } from 'semantic-ui-react'\nimport './navbar.css'\nimport logo from '../../images/x.svg'\nimport Infobar from '../infobar/infobar'\n\nclass Navbar extends Component {\n  handleItemClick = (e, { name }) => this.setState({ activeItem: name })\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      activeItem: '',\n      visible: false\n    }\n  }\n\n  componentDidUpdate() {\n  }\n\n  toggleVisible = () => {\n    this.setState({ visible: !this.state.visible })\n  }\n\n  render() {\n    const { children, drizzle, drizzleState } = this.props\n    const { activeItem, visible } = this.state\n\n    // var title = \"OasisX\"\n    var other_buttons = []\n    other_buttons.push(\n      {\n        name: 'WETH/DAI',\n        href: '/WETH_DAI' \n      },\n      {\n        name: 'MKR/WETH',\n        href: '/MKR_WETH'\n      },\n      {\n        name: 'MKR/DAI',\n        href: '/MKR_DAI'\n      }\n    )\n\n\n    return (\n      <div>\n        <Responsive {...Responsive.onlyMobile}>\n          <Menu \n            borderless\n            fixed='top'\n            id='Navbar-mobile'\n          >\n            <Menu.Item\n              name='Home'\n              active={activeItem === 'Home'}\n              href='/'\n              className='Navbar-item'\n            >\n              <div className='Navbar-button-mobile' id='Navbar-logo-container'><img src={logo} alt='logo' id='Navbar-logo-mobile' /></div>\n            </Menu.Item>\n            <Dropdown item text='Markets' className='Navbar-dropdown'>\n              <Dropdown.Menu>\n                {\n                  other_buttons.map((button, idx) => {\n                    return (\n                        <Dropdown.Item\n                          name={button.name}\n                          active={activeItem === button.name}\n                          className='Navbar-item'\n                          as={Link}\n                          to={button.href}\n                          key={idx}\n                        >\n                        {button.name}\n                      </Dropdown.Item>\n                    )\n                  })\n                }\n              </Dropdown.Menu>\n            </Dropdown>\n            <Menu.Menu position='right'>\n              <Menu.Item>\n                <Icon name='sidebar' inverted onClick={ this.toggleVisible } />\n              </Menu.Item>                \n            </Menu.Menu>\n          </Menu>\n          <Sidebar as={Segment} animation=\"overlay\" direction=\"right\" visible={visible} id=\"Navbar-Side_info_bar\">\n            <Infobar drizzle={drizzle} drizzleState={ drizzleState } padded={false} closeSidebar={this.toggleVisible} />\n          </Sidebar>\n          { children }\n        </Responsive>\n\n        <Responsive minWidth={Responsive.onlyTablet.minWidth}>\n          <Menu \n            secondary \n            vertical\n            size='mini'\n            id='Navbar'\n          >\n            <Menu.Item\n              name='Home'\n              className='Navbar-item'\n              as={Link}\n              to={'/'}\n            >\n              <div className='Navbar-button' id='Navbar-logo-container'><img src={logo} alt='logo' className='Navbar-icon' /></div>\n            </Menu.Item>\n            {\n              other_buttons.map((button, idx) => {\n                return (\n                    <Menu.Item\n                      name={button.name}\n                      active={activeItem === button.name}\n                      className='Navbar-item'\n                      onClick={this.handleToggle}\n                      as={Link}\n                      to={button.href}\n                      key={idx}\n                    >\n                    <div className='Navbar-button'>{button.name}</div>\n                  </Menu.Item>\n                )\n              })\n            }\n          </Menu>\n          { children }\n        </Responsive>\n      </div>\n    )\n  }\n}\n\nexport default Navbar;","import React, { Component } from 'react'\nimport { HashRouter, Switch, Route } from 'react-router-dom'\nimport { Responsive } from 'semantic-ui-react'\n\nimport './App.css'\n\nimport Market from '../market/market'\nimport Home from '../home/home'\nimport Navbar from '../navbar/navbar'\nimport Infobar from '../infobar/infobar'\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      loading: true,\n      drizzleState: null\n    }\n  }\n\n  componentDidMount() {\n    const { drizzle } = this.props\n\n    // Subscribe to changes in the store and assign to unsubscribe for later release\n    this.unsubscribe = drizzle.store.subscribe(() => {\n\n      // Every time the store updates we update the state and pass it to all the children\n      const drizzleState = drizzle.store.getState()\n\n      // If the entire setup is initialized then we update local component states\n      if(drizzleState.drizzleStatus.initialized) {\n        this.setState({ loading: false, drizzleState })\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe()\n  }\n\n  render() {\n    var { loading, drizzleState } = this.state\n    var { drizzle } = this.props\n\n    if(loading) {\n      return <div id=\"App-loading-screen\">Connecting to Ethereum...</div>\n    }\n    else {\n      return (\n        <div className=\"App\">\n          <HashRouter>\n            <div>\n              <Navbar drizzle={drizzle} drizzleState={ drizzleState } />\n              <div id=\"App_market_container\">\n                  <Switch>\n                    <Route exact path='/' render={() => <Home drizzle={drizzle} drizzleState={ drizzleState } />} />\n                    <Route exact path='/WETH_DAI' render={() => <Market key={'WETH_DAI'} drizzle={drizzle} drizzleState={ drizzleState } pair={'WETH_DAI'} />} />\n                    <Route exact path='/MKR_WETH' render={() => <Market key={'MKR_WETH'} drizzle={drizzle} drizzleState={ drizzleState } pair={'MKR_WETH'} />} />\n                    <Route exact path='/MKR_DAI' render={() => <Market  key={'MKR_DAI'} drizzle={drizzle} drizzleState={ drizzleState } pair={'MKR_DAI'} />} />\n                  </Switch>\n              </div>\n            </div>\n          </HashRouter>\n          <Responsive minWidth={Responsive.onlyTablet.minWidth}>\n            <Infobar drizzle={drizzle} drizzleState={ drizzleState } padded={true} />\n          </Responsive>\n        </div>\n      );\n    }\n  }\n}\n\nexport default App\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport './index.css';\nimport App from './containers/App/App';\nimport registerServiceWorker from './registerServiceWorker';\n\nimport { Drizzle, generateStore } from 'drizzle'\n\nimport Web3 from 'web3';\nconst web3 = new Web3(Web3.givenProvider || \"http://localhost:9545\")\n// web3.currentProvider.enable()\n\nconst config = require(\"./config\")\nconst erc20Abi = require(\"./abi/standard-token/erc20\")\nconst WEthAbi = require(\"./abi/standard-token/ds-eth-token\")\nconst MatchingMarketAbi = require(\"./abi/maker-otc/matching-market\");\nconst SupportMethodsAbi = require(\"./abi/otc-support-methods/otc-support-methods\")\n\nconst WETH = new web3.eth.Contract(WEthAbi.interface, config[\"tokens\"][\"main\"][\"W-ETH\"])\nconst DAI = new web3.eth.Contract(erc20Abi.interface, config[\"tokens\"][\"main\"][\"DAI\"])\nconst MKR = new web3.eth.Contract(erc20Abi.interface, config[\"tokens\"][\"main\"][\"MKR\"])\nconst market = new web3.eth.Contract(MatchingMarketAbi.interface, config[\"market\"][\"main\"][\"address\"])\nconst supportMethods = new web3.eth.Contract(SupportMethodsAbi.interface, config[\"otcSupportMethods\"][\"main\"][\"address\"])\n\nconst options = {\n\tcontracts: [\n\t\t{\n\t\t\tcontractName: 'WETH',\n\t\t\tweb3Contract: WETH\n\t\t},\n\t\t{\n\t\t\tcontractName: 'DAI',\n\t\t\tweb3Contract: DAI\n\t\t},\n\t\t{\n\t\t\tcontractName: 'MKR',\n\t\t\tweb3Contract: MKR\n\t\t},\n\t\t{\n\t\t\tcontractName: 'Market',\n\t\t\tweb3Contract: market\n\t\t},\n\t\t{\n\t\t\tcontractName: 'SupportMethods',\n\t\t\tweb3Contract: supportMethods\n\t\t}\n\t],\n\tevents: {\n\t\tMarket: ['LogTake']\n\t},\n\tpolls: {\n\t\taccounts: 3000,\n\t\tblocks: 3000\n\t},\n\tsyncAlways: false\n}\n\nconst drizzleStore = generateStore(options)\nconst drizzle = new Drizzle(options, drizzleStore)\n\nReactDOM.render(<App drizzle={drizzle} />, document.getElementById('root'));\nregisterServiceWorker();"],"sourceRoot":""}